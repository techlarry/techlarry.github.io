<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Zhenhua Wang">
        <link rel="canonical" href="http://larryim.cc/note/tij/ch20/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Chapter 20: Enumerated Types - Zhenhua's Notes</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/docco.min.css">
        <link href="../../extra_css/custom.css" rel="stylesheet">
        <link href="../../extra_css/custom.js" rel="stylesheet">
        <link href="../../extra_css/friendly.css" rel="stylesheet">
        <link href="../../extra_css/theme.css" rel="stylesheet">
        <link href="../../extra_css/mkdocs/js/lunr-0.5.7.min.js" rel="stylesheet">
        <link href="../../extra_css/mkdocs/js/mustache.min.js" rel="stylesheet">
        <link href="../../extra_css/mkdocs/js/require.js" rel="stylesheet">
        <link href="../../extra_css/mkdocs/js/search.js" rel="stylesheet">
        <link href="../../extra_css/mkdocs/js/text.js" rel="stylesheet">
        <link href="../../extra_css/code-tab.css" rel="stylesheet">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="../..">Zhenhua's Notes</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li >
                                <a href="../..">Home</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">OSC <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../osc/">Contents</a>
</li>
                                    
<li >
    <a href="../../osc/ch1/">Chapter 1: Introduction </a>
</li>
                                    
<li >
    <a href="../../osc/ch2/">Chapter 2: Operating System structures</a>
</li>
                                    
<li >
    <a href="../../osc/ch3/">Chapter 3: Processes</a>
</li>
                                    
<li >
    <a href="../../osc/ch4/">Chapter 4: Threads and Concurrency</a>
</li>
                                    
<li >
    <a href="../../osc/ch5/">Chapter 5: CPU Scheduling</a>
</li>
                                    
<li >
    <a href="../../osc/ch6/">Chapter 6: Synchronization Tools</a>
</li>
                                    
<li >
    <a href="../../osc/ch7/">Chapter 7: Synchronization Examples</a>
</li>
                                    
<li >
    <a href="../../osc/ch8/">Chapter 8: Deadlocks</a>
</li>
                                    
<li >
    <a href="../../osc/ch9/">Chapter 9: Main Memory</a>
</li>
                                    
<li >
    <a href="../../osc/ch10/">Chapter 10: Virtual Memory</a>
</li>
                                    
<li >
    <a href="../../osc/ch11/">Chapter 11: Mass-Storage Structure</a>
</li>
                                    
<li >
    <a href="../../osc/ch13/">Chapter 13: File-System Interfaces</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">CSAPP <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../csapp/">Contents</a>
</li>
                                    
<li >
    <a href="../../csapp/ch1/">Chapter 1: 计算机系统漫游</a>
</li>
                                    
<li >
    <a href="../../csapp/ch2/">Chapter 2: 信息的表示和处理</a>
</li>
                                    
<li >
    <a href="../../csapp/ch3/">Chapter 3: 程序的机器级表示</a>
</li>
                                    
<li >
    <a href="../../csapp/ch4/">Chapter 4: 处理器体系结构</a>
</li>
                                    
<li >
    <a href="../../csapp/ch5/">Chapter 5: 优化程序性能</a>
</li>
                                    
<li >
    <a href="../../csapp/ch6/">Chapter 6: 存储器层次结构</a>
</li>
                                    
<li >
    <a href="../../csapp/ch7/">Chapter 7: 链接</a>
</li>
                                    
<li >
    <a href="../../csapp/ch8/">Chapter 8: 异常控制流</a>
</li>
                                    
<li >
    <a href="../../csapp/ch9/">Chapter 9: 虚拟内存</a>
</li>
                                    
<li >
    <a href="../../csapp/ch10/">Chapter 10: 系统级I/O</a>
</li>
                                    
<li >
    <a href="../../csapp/ch11/">Chapter 11: 网络编程</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">MySql <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../mysql/">Contents</a>
</li>
                                    
<li >
    <a href="../../mysql/LearningMySQLandMariaDB/">Chapter Learning MySQL and MariaDB</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">HFJ <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../hfj/">Contents</a>
</li>
                                    
<li >
    <a href="../../hfj/ch1/">Chapter 1: Dive in A Quick Dip</a>
</li>
                                    
<li >
    <a href="../../hfj/ch2/">Chapter 2: Classes and Objects</a>
</li>
                                    
<li >
    <a href="../../hfj/ch3/">Chapter 3: Primitives and References</a>
</li>
                                    
<li >
    <a href="../../hfj/ch4/">Chapter 4: Methods use Instance Variables</a>
</li>
                                    
<li >
    <a href="../../hfj/ch5/">Chapter 5: Writing a Program</a>
</li>
                                    
<li >
    <a href="../../hfj/ch6/">Chapter 6: Get to Know the Java API</a>
</li>
                                    
<li >
    <a href="../../hfj/ch7/">Chapter 7: Inheritance and Polymorphism</a>
</li>
                                    
<li >
    <a href="../../hfj/ch8/">Chapter 8: Interfaces and Abstract Classes</a>
</li>
                                    
<li >
    <a href="../../hfj/ch9/">Chapter 9: Constructors and Garbage Collection</a>
</li>
                                    
<li >
    <a href="../../hfj/ch10/">Chapter 10: Numbers and Statics</a>
</li>
                                    
<li >
    <a href="../../hfj/ch11/">Chapter 11: Exception Handling</a>
</li>
                                    
<li >
    <a href="../../hfj/ch12/">Chapter 12: Getting GUI</a>
</li>
                                    
<li >
    <a href="../../hfj/ch13/">Chapter 13: Using Swing</a>
</li>
                                    
<li >
    <a href="../../hfj/ch14/">Chapter 14: Serialization and File I/O</a>
</li>
                                    
<li >
    <a href="../../hfj/ch15/">Chapter 15: Networking and Threads</a>
</li>
                                    
<li >
    <a href="../../hfj/ch16/">Chapter 16: Collections and Generics</a>
</li>
                                    
<li >
    <a href="../../hfj/ch17/">Chapter 17: Packages, Jars and Deployment</a>
</li>
                                    
<li >
    <a href="../../hfj/ch18/">Chapter 18: Remote deploy with RMI</a>
</li>
                                    
<li >
    <a href="../../hfj/Appendix/">Appendix: The Top Ten Topics</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">HFDP <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../hfdp/">Contents</a>
</li>
                                    
<li >
    <a href="../../hfdp/ch1/">Chapter 1: Strategy Pattern </a>
</li>
                                    
<li >
    <a href="../../hfdp/ch2/">Chapter 2: Observer Pattern</a>
</li>
                                    
<li >
    <a href="../../hfdp/ch3/">Chapter 3: Decorator Pattern </a>
</li>
                                    
<li >
    <a href="../../hfdp/ch4/">Chapter 4: Factory Pattern</a>
</li>
                                    
<li >
    <a href="../../hfdp/ch5/">Chapter 5: Singleton Pattern</a>
</li>
                                    
<li >
    <a href="../../hfdp/ch6/">Chapter 6: Command Pattern</a>
</li>
                                    
<li >
    <a href="../../hfdp/ch7/">Chapter 7: Adapter and Facade Patterns</a>
</li>
                                    
<li >
    <a href="../../hfdp/ch8/">Chapter 8: Template Method Pattern</a>
</li>
                                    
<li >
    <a href="../../hfdp/ch9/">Chapter 9: Iterator and Composite Patterns</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">TIJ <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../">Contents</a>
</li>
                                    
<li >
    <a href="../ch1/">Chapter 1: Introduction</a>
</li>
                                    
<li >
    <a href="../ch2/">Chapter 2: Introduction to Objects</a>
</li>
                                    
<li >
    <a href="../ch3/">Chapter 3: Everything is an Object</a>
</li>
                                    
<li >
    <a href="../ch4/">Chapter 4: Opertors</a>
</li>
                                    
<li >
    <a href="../ch5/">Chapter 5: Controlling Execution</a>
</li>
                                    
<li >
    <a href="../ch6/">Chapter 6: Initialization & Cleanup</a>
</li>
                                    
<li >
    <a href="../ch7/">Chapter 7: Access Control</a>
</li>
                                    
<li >
    <a href="../ch8/">Chapter 8: Reusing Clases</a>
</li>
                                    
<li >
    <a href="../ch9/">Chapter 9: Polymorphism</a>
</li>
                                    
<li >
    <a href="../ch10/">Chapter 10: Interfaces</a>
</li>
                                    
<li >
    <a href="../ch11/">Chapter 11: Inner Classes</a>
</li>
                                    
<li >
    <a href="../ch12/">Chapter 12: Holding Your Objects</a>
</li>
                                    
<li >
    <a href="../ch13/">Chapter 13: Error Handling with Exceptions</a>
</li>
                                    
<li >
    <a href="../ch14/">Chapter 14: Strings</a>
</li>
                                    
<li >
    <a href="../ch15/">Chapter 15: Type Information</a>
</li>
                                    
<li >
    <a href="../ch16/">Chapter 16: Generics</a>
</li>
                                    
<li >
    <a href="../ch17/">Chapter 17: Arrays</a>
</li>
                                    
<li >
    <a href="../ch18/">Chapter 18: Containers in Depth</a>
</li>
                                    
<li >
    <a href="../ch19/">Chapter 19: I/O</a>
</li>
                                    
<li class="active">
    <a href="./">Chapter 20: Enumerated Types</a>
</li>
                                    
<li >
    <a href="../ch21/">Chapter 21: Annotations</a>
</li>
                                    
<li >
    <a href="../ch22/">Chapter 22: Concurrency</a>
</li>
                                    
<li >
    <a href="../ch23/">Chapter 23: Graphical User Interfaces</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">UJVM <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../ujvm/">Contents</a>
</li>
                                    
<li >
    <a href="../../ujvm/ch1/">Chapter 1 : 走进Java</a>
</li>
                                    
<li >
    <a href="../../ujvm/ch2/">Chapter 2 : Java内存区域与内存溢出正常</a>
</li>
                                    
<li >
    <a href="../../ujvm/ch3/">Chapter 3 : 垃圾收集器与内存分配策略</a>
</li>
                                    
<li >
    <a href="../../ujvm/ch4/">Chapter 4 : 虚拟机性能监控与故障处理工具</a>
</li>
                                    
<li >
    <a href="../../ujvm/ch5/">Chapter 5 : 调优案例分析与实战</a>
</li>
                                    
<li >
    <a href="../../ujvm/ch6/">Chapter 6 : 类文件结构</a>
</li>
                                    
<li >
    <a href="../../ujvm/ch7/">Chapter 7 : 虚拟机类加载机制</a>
</li>
                                    
<li >
    <a href="../../ujvm/ch8/">Chapter 8 : 虚拟机字节码执行引擎</a>
</li>
                                    
<li >
    <a href="../../ujvm/ch9/">Chapter 9 : 类加载及执行子系统的案例与实战</a>
</li>
                                    
<li >
    <a href="../../ujvm/ch10/">Chapter 10 : 早期(编译期)优化</a>
</li>
                                    
<li >
    <a href="../../ujvm/ch11/">Chapter 11 : 晚期(运行期)优化</a>
</li>
                                    
<li >
    <a href="../../ujvm/ch12/">Chapter 12 : Java内存模型与线程</a>
</li>
                                    
<li >
    <a href="../../ujvm/ch13/">Chapter 13 : 线程安全与锁优化</a>
</li>
                                    
<li >
    <a href="../../ujvm/AppendixC/">Appendix HotSpot虚拟机主要参数列表</a>
</li>
                                </ul>
                            </li>
                            <li >
                                <a href="../../books/">Books</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li >
                                <a rel="next" href="../ch19/">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li >
                                <a rel="prev" href="../ch21/">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#thinking-in-java-20-enumerated-types">Thinking in Java 20 - Enumerated Types</a></li>
            <li><a href="#using-static-imports-with-enums">Using static imports with enums</a></li>
            <li><a href="#adding-methods-to-an-enum">Adding methods to an enum</a></li>
            <li><a href="#the-mystery-of-values">The mystery of values()</a></li>
            <li><a href="#implements-not-inherits">Implements, not inherits</a></li>
            <li><a href="#using-enumset-instead-of-flags">Using EnumSet instead of flags</a></li>
            <li><a href="#using-enummap">Using EnumMap</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h3 id="thinking-in-java-20-enumerated-types"><strong>Thinking in Java 20 - Enumerated Types</strong><a class="headerlink" href="#thinking-in-java-20-enumerated-types" title="Permanent link">&para;</a></h3>
<p>When you create an <C>enum</C>, an associated class is produced for you by the compiler. This class is automatically <strong>inherited</strong> from <C>java.lang.Enum</C>.</p>
<p> <div class=codehilite><pre><span class=kd>public</span> <span class=kd>abstract</span> <span class=kd>class</span> <span class=nc>Enum</span><span class=o>&lt;</span><span class=n>E</span> <span class=kd>extends</span> <span class=n>Enum</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;&gt;</span>
        <span class=kd>implements</span> <span class=n>Comparable</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;,</span> <span class=n>Serializable</span> 
</pre></div></p>
<p>The definition means that the type argument for <C>enum</C> has to derive from an <C>enum</C> which itself has the same type argument.  So if I've got an <C>enum</C> called StatusCode, it would be equivalent to [<a href="https://stackoverflow.com/questions/211143/java-enum-definition">ref</a>]:</p>
<p> <div class=codehilite><pre><span class=kd>public</span> <span class=kd>class</span> <span class=nc>StatusCode</span> <span class=kd>extends</span> <span class=n>Enum</span><span class=o>&lt;</span><span class=n>StatusCode</span><span class=o>&gt;</span>
</pre></div></p>
<h4 id="using-static-imports-with-enums">Using static imports with enums<a class="headerlink" href="#using-static-imports-with-enums" title="Permanent link">&para;</a></h4>
<p>The <C>static</C> import brings all the <C>enum</C> instance identifiers into the local namespace, so they don’t need to be qualified.</p>
<p> <div class=codehilite><pre><span class=c1>// Spiciness.java</span>
<span class=kd>public</span> <span class=kd>enum</span> <span class=n>Spiciness</span> <span class=o>{</span>
  <span class=n>NOT</span><span class=o>,</span> <span class=n>MILD</span><span class=o>,</span> <span class=n>MEDIUM</span><span class=o>,</span> <span class=n>HOT</span><span class=o>,</span> <span class=n>FLAMING</span>
<span class=o>}</span>
<span class=c1>// Burrito.java</span>
<span class=kn>import</span> <span class=nn>static</span> <span class=n>Spiciness</span><span class=o>.*;</span>
<span class=kd>public</span> <span class=kd>class</span> <span class=nc>Burrito</span> <span class=o>{</span>
  <span class=n>Spiciness</span> <span class=n>degree</span><span class=o>;</span>
  <span class=kd>public</span> <span class=nf>Burrito</span><span class=o>(</span><span class=n>Spiciness</span> <span class=n>degree</span><span class=o>)</span> <span class=o>{</span> <span class=k>this</span><span class=o>.</span><span class=na>degree</span> <span class=o>=</span> <span class=n>degree</span><span class=o>;}</span>
  <span class=kd>public</span> <span class=n>String</span> <span class=nf>toString</span><span class=o>()</span> <span class=o>{</span> <span class=k>return</span> <span class=s>&quot;Burrito is &quot;</span><span class=o>+</span> <span class=n>degree</span><span class=o>;}</span>
  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=k>new</span> <span class=n>Burrito</span><span class=o>(</span><span class=n>NOT</span><span class=o>));</span>
    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=k>new</span> <span class=n>Burrito</span><span class=o>(</span><span class=n>HOT</span><span class=o>));</span>
  <span class=o>}</span>
<span class=o>}</span>
</pre></div></p>
<h4 id="adding-methods-to-an-enum">Adding methods to an enum<a class="headerlink" href="#adding-methods-to-an-enum" title="Permanent link">&para;</a></h4>
<p>Except for the fact that you can’t inherit from it, an <C>enum</C> can be treated much like a regular class. This means that you can add methods to an  <C>enum</C> . It’s even possible for an  <C>enum</C>  to have a <C>main()</C>. Notice that if you are going to define methods you must end the sequence of  <C>enum</C> instances with a semicolon.</p>
<p> <div class=codehilite><pre><span class=kd>public</span> <span class=kd>enum</span> <span class=n>OzWitch</span> <span class=o>{</span>
  <span class=c1>// Instances must be defined first, before methods:</span>
  <span class=n>WEST</span><span class=o>(</span><span class=s>&quot;Miss Gulch, aka the Wicked Witch of the West&quot;</span><span class=o>),</span>
  <span class=n>SOUTH</span><span class=o>(</span><span class=s>&quot;Good by inference, but missing&quot;</span><span class=o>);</span>
  <span class=kd>private</span> <span class=n>String</span> <span class=n>description</span><span class=o>;</span>
  <span class=c1>// Constructor must be package or private access:</span>
  <span class=kd>private</span> <span class=nf>OzWitch</span><span class=o>(</span><span class=n>String</span> <span class=n>description</span><span class=o>)</span> <span class=o>{</span>
    <span class=k>this</span><span class=o>.</span><span class=na>description</span> <span class=o>=</span> <span class=n>description</span><span class=o>;</span>
  <span class=o>}</span>
  <span class=kd>public</span> <span class=n>String</span> <span class=nf>getDescription</span><span class=o>()</span> <span class=o>{</span> <span class=k>return</span> <span class=n>description</span><span class=o>;</span> <span class=o>}</span>
  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
    <span class=k>for</span><span class=o>(</span><span class=n>OzWitch</span> <span class=n>witch</span> <span class=o>:</span> <span class=n>OzWitch</span><span class=o>.</span><span class=na>values</span><span class=o>())</span>
      <span class=n>print</span><span class=o>(</span><span class=n>witch</span> <span class=o>+</span> <span class=s>&quot;: &quot;</span> <span class=o>+</span> <span class=n>witch</span><span class=o>.</span><span class=na>getDescription</span><span class=o>());</span>
  <span class=o>}</span>
<span class=o>}</span>
</pre></div></p>
<p>Also you can overriding <C>enum</C> methods.</p>
<h4 id="the-mystery-of-values">The mystery of values()<a class="headerlink" href="#the-mystery-of-values" title="Permanent link">&para;</a></h4>
<p>The method <C>values()</C> is a static method that is added by the compiler.</p>
<blockquote>
<p>The compiler automatically adds some special methods when it creates an enum. For example, they have a static values method that returns an array containing all of the values of the enum in the order they are declared. This method is commonly used in combination with the for-each construct to iterate over the values of an enum type. [<a href="https://docs.oracle.com/javase/tutorial/java/javaOO/enum.html">Java Tutorials - Enum Type</a>]</p>
</blockquote>
<h4 id="implements-not-inherits">Implements, not inherits<a class="headerlink" href="#implements-not-inherits" title="Permanent link">&para;</a></h4>
<p>All <C>enum</C>s extend <C>java.lang.Enum</C>. Since Java does not support multiple inheritance, this means that you cannot create an <C>enum</C> via inheritance. However, it is possible to create an <C>enum</C> that implements one or more interfaces.</p>
<h4 id="using-enumset-instead-of-flags">Using EnumSet instead of flags<a class="headerlink" href="#using-enumset-instead-of-flags" title="Permanent link">&para;</a></h4>
<p>The <C>EnumSet</C> was added to Java SE5 to work in concert with <C>enum</C>s to create a replacement for traditional int-based "bit flags." The <C>EnumSet</C> is designed for speed, because it must compete effectively with bit flags. Internally, it is represented by (if possible) a <strong>single</strong> <C>long</C> that is treated as a bit-vector, so it’s extremely fast and efficient.</p>
<p> <div class=codehilite><pre><span class=kn>package</span> <span class=nn>java.util</span><span class=o>;</span>
<span class=kd>public</span> <span class=kd>abstract</span> <span class=kd>class</span> <span class=nc>EnumSet</span><span class=o>&lt;</span><span class=n>E</span> <span class=kd>extends</span> <span class=n>Enum</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;&gt;</span> <span class=kd>extends</span> <span class=n>AbstractSet</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span>
    <span class=kd>implements</span> <span class=n>Cloneable</span><span class=o>,</span> <span class=n>java</span><span class=o>.</span><span class=na>io</span><span class=o>.</span><span class=na>Serializable</span>
</pre></div></p>
<p><C>EnumSet</C>s are built on top of <C>long</C>s, a <C>long</C> is 64 bits, and each <C>enum</C> instance requires one bit to indicate presence or absence. This means you can have an <C>EnumSet</C>  for an <C>enum</C> of up to 64 elements without going beyond the use of a single <C>long</C>.</p>
<p><C>EnumSet</C>是一个抽象类，不能直接通过<C>new</C>新建，不过提供了若干静态工厂方法(<C>noneof</C>, <C>allof</C>等)。</p>
<p>当<C>EnumSet</C>大于64个时，采用<C>JumboEnumSet</C>，否则采用<C>RegularEnumSet</C>:</p>
<p> <div class=codehilite><pre><span class=c1>// The class of all the elements of this set.</span>
<span class=kd>final</span> <span class=n>Class</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>elementType</span><span class=o>;</span>
<span class=c1>// All of the values comprising T.  (Cached for performance.)</span>
<span class=kd>final</span> <span class=n>Enum</span><span class=o>&lt;?&gt;[]</span> <span class=n>universe</span><span class=o>;</span>
<span class=c1>// Creates an empty enum set with the specified element type.</span>
<span class=kd>public</span> <span class=kd>static</span> <span class=o>&lt;</span><span class=n>E</span> <span class=kd>extends</span> <span class=n>Enum</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;&gt;</span> <span class=n>EnumSet</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=nf>noneOf</span><span class=o>(</span><span class=n>Class</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>elementType</span><span class=o>)</span> <span class=o>{</span>
    <span class=n>Enum</span><span class=o>&lt;?&gt;[]</span> <span class=n>universe</span> <span class=o>=</span> <span class=n>getUniverse</span><span class=o>(</span><span class=n>elementType</span><span class=o>);</span>
    <span class=k>if</span> <span class=o>(</span><span class=n>universe</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span>
        <span class=k>throw</span> <span class=k>new</span> <span class=n>ClassCastException</span><span class=o>(</span><span class=n>elementType</span> <span class=o>+</span> <span class=s>&quot; not an enum&quot;</span><span class=o>);</span>

    <span class=k>if</span> <span class=o>(</span><span class=n>universe</span><span class=o>.</span><span class=na>length</span> <span class=o>&lt;=</span> <span class=mi>64</span><span class=o>)</span>
        <span class=k>return</span> <span class=k>new</span> <span class=n>RegularEnumSet</span><span class=o>&lt;&gt;(</span><span class=n>elementType</span><span class=o>,</span> <span class=n>universe</span><span class=o>);</span>
    <span class=k>else</span>
        <span class=k>return</span> <span class=k>new</span> <span class=n>JumboEnumSet</span><span class=o>&lt;&gt;(</span><span class=n>elementType</span><span class=o>,</span> <span class=n>universe</span><span class=o>);</span>
<span class=o>}</span>
</pre></div></p>
<p><img alt="EnumSet" src="../figures/EnumSet.png" /></p>
<p>对于<C>RegularEnumSet</C>，它用一个<C>long</C>类型表示位向量;对于<C>JumboEnumSet</C>，它用一个<C>long</C>数组表示。</p>
<p> <div class=codehilite><pre><span class=c1>// RegularEnumSet.java</span>
<span class=c1>// Bit vector representation of this set.  </span>
<span class=c1>// The 2^k bit indicates the presence of universe[k] in this set.</span>
<span class=kd>private</span> <span class=kt>long</span> <span class=n>elements</span> <span class=o>=</span> <span class=mi>0</span><span class=n>L</span><span class=o>;</span>


<span class=c1>// JumboEnumSet.java</span>
<span class=c1>// Bit vector representation of this set.  The ith bit of the jth</span>
<span class=c1>// element of this array represents the  presence of universe[64*j +i]</span>
<span class=c1>// in this set.</span>
<span class=kd>private</span> <span class=kt>long</span> <span class=n>elements</span><span class=o>[];</span>
</pre></div></p>
<h4 id="using-enummap">Using EnumMap<a class="headerlink" href="#using-enummap" title="Permanent link">&para;</a></h4>
<p>An <C>EnumMap</C> is a specialized <C>Map</C> that requires that its keys be from a single <C>enum</C>. Because of the constraints on an <C>enum</C>, an <C>EnumMap</C> can be implemented internally as an array. Thus they are extremely fast, so you can freely use <C>EnumMaps</C> for enum-based lookups.</p>
<p> <div class=codehilite><pre><span class=kd>public</span> <span class=kd>class</span> <span class=nc>EnumMap</span><span class=o>&lt;</span><span class=n>K</span> <span class=kd>extends</span> <span class=n>Enum</span><span class=o>&lt;</span><span class=n>K</span><span class=o>&gt;,</span> <span class=n>V</span><span class=o>&gt;</span> <span class=kd>extends</span> <span class=n>AbstractMap</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span> <span class=n>V</span><span class=o>&gt;</span>
    <span class=kd>implements</span> <span class=n>java</span><span class=o>.</span><span class=na>io</span><span class=o>.</span><span class=na>Serializable</span><span class=o>,</span> <span class=n>Cloneable</span>
<span class=kd>private</span> <span class=kd>final</span> <span class=n>Class</span><span class=o>&lt;</span><span class=n>K</span><span class=o>&gt;</span> <span class=n>keyType</span><span class=o>;</span>
<span class=c1>// Array representation of this map.</span>
<span class=kd>private</span> <span class=kd>transient</span> <span class=n>Object</span><span class=o>[]</span> <span class=n>vals</span><span class=o>;</span>
</pre></div></p>
<p><C>key</C>其实就是<C>Enum.ordinal()</C>，所以实际上<C>EnumMaps</C>就是一个数组，如果要查询某个<C>key</C>是否存在：</p>
<p> <div class=codehilite><pre><span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>containsKey</span><span class=o>(</span><span class=n>Object</span> <span class=n>key</span><span class=o>)</span> <span class=o>{</span>
    <span class=k>return</span> <span class=n>isValidKey</span><span class=o>(</span><span class=n>key</span><span class=o>)</span> <span class=o>&amp;&amp;</span> <span class=n>vals</span><span class=o>[((</span><span class=n>Enum</span><span class=o>&lt;?&gt;)</span><span class=n>key</span><span class=o>).</span><span class=na>ordinal</span><span class=o>()]</span> <span class=o>!=</span> <span class=kc>null</span><span class=o>;</span>
<span class=o>}</span>
</pre></div></p>
<p>再来看看<C>put()</C>方法：</p>
<p> <div class=codehilite><pre><span class=kd>public</span> <span class=n>V</span> <span class=nf>put</span><span class=o>(</span><span class=n>K</span> <span class=n>key</span><span class=o>,</span> <span class=n>V</span> <span class=n>value</span><span class=o>)</span> <span class=o>{</span>
    <span class=n>typeCheck</span><span class=o>(</span><span class=n>key</span><span class=o>);</span>

    <span class=kt>int</span> <span class=n>index</span> <span class=o>=</span> <span class=n>key</span><span class=o>.</span><span class=na>ordinal</span><span class=o>();</span>
    <span class=n>Object</span> <span class=n>oldValue</span> <span class=o>=</span> <span class=n>vals</span><span class=o>[</span><span class=n>index</span><span class=o>];</span>
    <span class=n>vals</span><span class=o>[</span><span class=n>index</span><span class=o>]</span> <span class=o>=</span> <span class=n>maskNull</span><span class=o>(</span><span class=n>value</span><span class=o>);</span>
    <span class=k>if</span> <span class=o>(</span><span class=n>oldValue</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span>
        <span class=n>size</span><span class=o>++;</span>
    <span class=k>return</span> <span class=n>unmaskNull</span><span class=o>(</span><span class=n>oldValue</span><span class=o>);</span>
<span class=o>}</span>
</pre></div></p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"search": 83, "next": 78, "help": 191, "previous": 80};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
        <script src="../../extra_javascript/tabhack.js" defer></script>
        <script src="../../extra_javascript/baidu.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
