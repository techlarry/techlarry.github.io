<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Zhenhua Wang">
        <link rel="canonical" href="http://larryim.cc/note/hfj/ch9/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Chapter 9: Constructors and Garbage Collection - Zhenhua's Notes</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <link href="../../extra_css/custom.css" rel="stylesheet">
        <link href="../../extra_css/custom.js" rel="stylesheet">
        <link href="../../extra_css/friendly.css" rel="stylesheet">
        <link href="../../extra_css/theme.css" rel="stylesheet">
        <link href="../../extra_css/mkdocs/js/lunr-0.5.7.min.js" rel="stylesheet">
        <link href="../../extra_css/mkdocs/js/mustache.min.js" rel="stylesheet">
        <link href="../../extra_css/mkdocs/js/require.js" rel="stylesheet">
        <link href="../../extra_css/mkdocs/js/search.js" rel="stylesheet">
        <link href="../../extra_css/mkdocs/js/text.js" rel="stylesheet">
        <link href="../../extra_css/code-tab.css" rel="stylesheet">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="../..">Zhenhua's Notes</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="../..">Home</a>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">OSC <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../osc/">Contents</a>
</li>
                            
<li >
    <a href="../../osc/ch1/">Chapter 1: Introduction </a>
</li>
                            
<li >
    <a href="../../osc/ch2/">Chapter 2: Operating System structures</a>
</li>
                            
<li >
    <a href="../../osc/ch3/">Chapter 3: Processes</a>
</li>
                            
<li >
    <a href="../../osc/ch4/">Chapter 4: Threads and Concurrency</a>
</li>
                            
<li >
    <a href="../../osc/ch5/">Chapter 5: CPU Scheduling</a>
</li>
                            
<li >
    <a href="../../osc/ch6/">Chapter 6: Synchronization Tools</a>
</li>
                            
<li >
    <a href="../../osc/ch7/">Chapter 7: Synchronization Examples</a>
</li>
                            
<li >
    <a href="../../osc/ch8/">Chapter 8: Deadlocks</a>
</li>
                            
<li >
    <a href="../../osc/ch9/">Chapter 9: Main Memory</a>
</li>
                            
<li >
    <a href="../../osc/ch10/">Chapter 10: Virtual Memory</a>
</li>
                            
<li >
    <a href="../../osc/ch11/">Chapter 11: Mass-Storage Structure</a>
</li>
                            
<li >
    <a href="../../osc/ch13/">Chapter 13: File-System Interfaces</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">CSAPP <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../csapp/">Contents</a>
</li>
                            
<li >
    <a href="../../csapp/ch1/">Chapter 1: 计算机系统漫游</a>
</li>
                            
<li >
    <a href="../../csapp/ch2/">Chapter 2: 信息的表示和处理</a>
</li>
                            
<li >
    <a href="../../csapp/ch3/">Chapter 3: 程序的机器级表示</a>
</li>
                            
<li >
    <a href="../../csapp/ch4/">Chapter 4: 处理器体系结构</a>
</li>
                            
<li >
    <a href="../../csapp/ch5/">Chapter 5: 优化程序性能</a>
</li>
                            
<li >
    <a href="../../csapp/ch6/">Chapter 6: 存储器层次结构</a>
</li>
                            
<li >
    <a href="../../csapp/ch7/">Chapter 7: 链接</a>
</li>
                            
<li >
    <a href="../../csapp/ch8/">Chapter 8: 异常控制流</a>
</li>
                            
<li >
    <a href="../../csapp/ch9/">Chapter 9: 虚拟内存</a>
</li>
                            
<li >
    <a href="../../csapp/ch10/">Chapter 10: 系统级I/O</a>
</li>
                            
<li >
    <a href="../../csapp/ch11/">Chapter 11: 网络编程</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">HFJ <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../">Contents</a>
</li>
                            
<li >
    <a href="../ch1/">Chapter 1: Dive in A Quick Dip</a>
</li>
                            
<li >
    <a href="../ch2/">Chapter 2: Classes and Objects</a>
</li>
                            
<li >
    <a href="../ch3/">Chapter 3: Primitives and References</a>
</li>
                            
<li >
    <a href="../ch4/">Chapter 4: Methods use Instance Variables</a>
</li>
                            
<li >
    <a href="../ch5/">Chapter 5: Writing a Program</a>
</li>
                            
<li >
    <a href="../ch6/">Chapter 6: Get to Know the Java API</a>
</li>
                            
<li >
    <a href="../ch7/">Chapter 7: Inheritance and Polymorphism</a>
</li>
                            
<li >
    <a href="../ch8/">Chapter 8: Interfaces and Abstract Classes</a>
</li>
                            
<li class="active">
    <a href="./">Chapter 9: Constructors and Garbage Collection</a>
</li>
                            
<li >
    <a href="../ch10/">Chapter 10: Numbers and Statics</a>
</li>
                            
<li >
    <a href="../ch11/">Chapter 11: Exception Handling</a>
</li>
                            
<li >
    <a href="../ch12/">Chapter 12: Getting GUI</a>
</li>
                            
<li >
    <a href="../ch13/">Chapter 13: Using Swing</a>
</li>
                            
<li >
    <a href="../ch14/">Chapter 14: Serialization and File I/O</a>
</li>
                            
<li >
    <a href="../ch15/">Chapter 15: Networking and Threads</a>
</li>
                            
<li >
    <a href="../ch16/">Chapter 16: Collections and Generics</a>
</li>
                            
<li >
    <a href="../ch17/">Chapter 17: Packages, Jars and Deployment</a>
</li>
                            
<li >
    <a href="../ch18/">Chapter 18: Remote deploy with RMI</a>
</li>
                            
<li >
    <a href="../Appendix/">Appendix: The Top Ten Topics</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">HFDP <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../hfdp/">Contents</a>
</li>
                            
<li >
    <a href="../../hfdp/ch1/">Chapter 1: Strategy Pattern </a>
</li>
                            
<li >
    <a href="../../hfdp/ch2/">Chapter 2: Observer Pattern</a>
</li>
                            
<li >
    <a href="../../hfdp/ch3/">Chapter 3: Decorator Pattern </a>
</li>
                            
<li >
    <a href="../../hfdp/ch4/">Chapter 4: Factory Pattern</a>
</li>
                            
<li >
    <a href="../../hfdp/ch5/">Chapter 5: Singleton Pattern</a>
</li>
                            
<li >
    <a href="../../hfdp/ch6/">Chapter 6: Command Pattern</a>
</li>
                            
<li >
    <a href="../../hfdp/ch7/">Chapter 7: Adapter and Facade Patterns</a>
</li>
                            
<li >
    <a href="../../hfdp/ch8/">Chapter 8: Template Method Pattern</a>
</li>
                            
<li >
    <a href="../../hfdp/ch9/">Chapter 9: Iterator and Composite Patterns</a>
</li>
                            
<li >
    <a href="../../hfdp/ch10/">Chapter 10: State Pattern</a>
</li>
                            
<li >
    <a href="../../hfdp/ch11/">Chapter 11: Proxy Pattern</a>
</li>
                            
<li >
    <a href="../../hfdp/ch12/">Chapter 12: Compound Pattern</a>
</li>
                            
<li >
    <a href="../../hfdp/ch13/">Chapter 13: Better Living with Patterns</a>
</li>
                            
<li >
    <a href="../../hfdp/Appendix/">Appendix: Design Pattern in Java Library</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">CS61B <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../cs61b/">Contents</a>
</li>
                            
<li >
    <a href="../../cs61b/Lab1/">Lab1: javac, java, git</a>
</li>
                            
<li >
    <a href="../../cs61b/Lab2/">Lab2: Unit Testing with JUnit and IntLists</a>
</li>
                            
<li >
    <a href="../../cs61b/Lab3/">Lab3: Unit Testing with JUnit, Debugging</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">TIJ <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../tij/">Contents</a>
</li>
                            
<li >
    <a href="../../tij/ch1/">Chapter 1: Introduction</a>
</li>
                            
<li >
    <a href="../../tij/ch2/">Chapter 2: Introduction to Objects</a>
</li>
                            
<li >
    <a href="../../tij/ch3/">Chapter 3: Everything is an Object</a>
</li>
                            
<li >
    <a href="../../tij/ch4/">Chapter 4: Opertors</a>
</li>
                            
<li >
    <a href="../../tij/ch5/">Chapter 5: Controlling Execution</a>
</li>
                            
<li >
    <a href="../../tij/ch6/">Chapter 6: Initialization & Cleanup</a>
</li>
                            
<li >
    <a href="../../tij/ch7/">Chapter 7: Access Control</a>
</li>
                            
<li >
    <a href="../../tij/ch8/">Chapter 8: Reusing Clases</a>
</li>
                            
<li >
    <a href="../../tij/ch9/">Chapter 9: Polymorphism</a>
</li>
                            
<li >
    <a href="../../tij/ch10/">Chapter 10: Interfaces</a>
</li>
                            
<li >
    <a href="../../tij/ch11/">Chapter 11: Inner Classes</a>
</li>
                            
<li >
    <a href="../../tij/ch12/">Chapter 12: Holding Your Objects</a>
</li>
                            
<li >
    <a href="../../tij/ch13/">Chapter 13: Error Handling with Exceptions</a>
</li>
                            
<li >
    <a href="../../tij/ch14/">Chapter 14: Strings</a>
</li>
                            
<li >
    <a href="../../tij/ch15/">Chapter 15: Type Information</a>
</li>
                            
<li >
    <a href="../../tij/ch16/">Chapter 16: Generics</a>
</li>
                            
<li >
    <a href="../../tij/ch17/">Chapter 17: Arrays</a>
</li>
                            
<li >
    <a href="../../tij/ch18/">Chapter 18: Containers in Depth</a>
</li>
                            
<li >
    <a href="../../tij/ch19/">Chapter 19: I/O</a>
</li>
                            
<li >
    <a href="../../tij/ch20/">Chapter 20: Enumerated Types</a>
</li>
                            
<li >
    <a href="../../tij/ch21/">Chapter 21: Annotations</a>
</li>
                            
<li >
    <a href="../../tij/ch22/">Chapter 22: Concurrency</a>
</li>
                            
<li >
    <a href="../../tij/ch23/">Chapter 23: Graphical User Interfaces</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">UJVM <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../ujvm/">Contents</a>
</li>
                            
<li >
    <a href="../../ujvm/ch1/">Chapter 1 : 走进Java</a>
</li>
                            
<li >
    <a href="../../ujvm/ch2/">Chapter 2 : Java内存区域与内存溢出正常</a>
</li>
                            
<li >
    <a href="../../ujvm/ch3/">Chapter 3 : 垃圾收集器与内存分配策略</a>
</li>
                            
<li >
    <a href="../../ujvm/ch4/">Chapter 4 : 虚拟机性能监控与故障处理工具</a>
</li>
                            
<li >
    <a href="../../ujvm/ch5/">Chapter 5 : 调优案例分析与实战</a>
</li>
                            
<li >
    <a href="../../ujvm/ch6/">Chapter 6 : 类文件结构</a>
</li>
                            
<li >
    <a href="../../ujvm/ch7/">Chapter 7 : 虚拟机类加载机制</a>
</li>
                            
<li >
    <a href="../../ujvm/ch8/">Chapter 8 : 虚拟机字节码执行引擎</a>
</li>
                            
<li >
    <a href="../../ujvm/ch9/">Chapter 9 : 类加载及执行子系统的案例与实战</a>
</li>
                            
<li >
    <a href="../../ujvm/ch10/">Chapter 10 : 早期(编译期)优化</a>
</li>
                            
<li >
    <a href="../../ujvm/ch11/">Chapter 11 : 晚期(运行期)优化</a>
</li>
                            
<li >
    <a href="../../ujvm/ch12/">Chapter 12 : Java内存模型与线程</a>
</li>
                            
<li >
    <a href="../../ujvm/ch13/">Chapter 13 : 线程安全与锁优化</a>
</li>
                            
<li >
    <a href="../../ujvm/AppendixC/">Appendix HotSpot虚拟机主要参数列表</a>
</li>
                        </ul>
                    </li>
                    <li >
                        <a href="../../books/">Books</a>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="../ch8/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../ch10/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#chapter-9-constructors-and-garbage-collection">Chapter 9 Constructors and Garbage Collection</a></li>
        <li class="main "><a href="#1-stack-and-heap">1 Stack and Heap</a></li>
        <li class="main "><a href="#2-constructor">2 Constructor</a></li>
            <li><a href="#initializing-the-state-of-an-object">Initializing the state of an object</a></li>
            <li><a href="#constructor-chaining">constructor chaining</a></li>
            <li><a href="#invoke-a-superclass-constructor">invoke a superclass constructor</a></li>
            <li><a href="#this">this</a></li>
        <li class="main "><a href="#3-object-lifespan">3 Object lifespan</a></li>
            <li><a href="#object-lifecycle">Object lifecycle</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h3 id="chapter-9-constructors-and-garbage-collection"><strong>Chapter 9 Constructors and Garbage Collection</strong><a class="headerlink" href="#chapter-9-constructors-and-garbage-collection" title="Permanent link">&para;</a></h3>
<h3 id="1-stack-and-heap">1 Stack and Heap<a class="headerlink" href="#1-stack-and-heap" title="Permanent link">&para;</a></h3>
<p>In Java, programmers care about two areas of memory</p>
<ul>
<li>heap: where objects live</li>
<li>stack: where method invocations and local variables live</li>
</ul>
<p><img alt="STACK_ADN_HEAP" src="../figures/STACK_ADN_HEAP.png" /></p>
<p><strong>Instance variables</strong> are declared inside a <em>class</em> but not inside a method. Instance variables live inside the object they belong to. So instance variable live on the Heap, inside the object.</p>
<p><img alt="instance_variable_live_inside_the_obeject" src="../figures/instance_variable_live_inside_the_obeject.png" /></p>
<p><strong>Local variables</strong> are declared inside a <em>method</em>, including method parameters. They're temporary, and live only as long as the method is on the stack.</p>
<p>What about local variables that are objects?</p>
<p><strong><em>If the local variable is a reference to an object, only the variable (the reference/remote control) goes on the stack.</em></strong></p>
<p> <div class=codehilite><pre><span class=kd>public</span> <span class=kd>class</span> <span class=nc>StackRef</span> <span class=o>{</span>
    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>foof</span><span class=o>()</span> <span class=o>{</span>
     <span class=n>barf</span><span class=o>();</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>barf</span><span class=o>()</span> <span class=o>{</span>
        <span class=n>Duck</span> <span class=n>d</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Duck</span><span class=o>(</span><span class=mi>24</span><span class=o>);</span>
    <span class=o>}</span>
<span class=o>}</span>
</pre></div></p>
<p><img alt="local_variable_is_a_referece_to_an_object" src="../figures/local_variable_is_a_referece_to_an_object-1.png" /></p>
<h3 id="2-constructor">2 Constructor<a class="headerlink" href="#2-constructor" title="Permanent link">&para;</a></h3>
<p><strong>Constructor</strong>(构造函数) is <em><em>the code that runs when you instantiate an object</em></em> . They only way to invoke a constructor is with the keyword <strong><code class="codehilite">new</code></strong> followed by the class name.</p>
<p>You can write a constructor for your class, but if you don't the <strong><em>compiler writes one for you</em></strong> !</p>
<p>Here is what the compiler default constructor looks like:</p>
<p> <div class=codehilite><pre><span class=kd>public</span> <span class=nf>Duck</span><span class=o>(){</span>

<span class=o>}</span>
</pre></div></p>
<p>A constructor does look and feel a lot like a method, but it's <em>not</em> a method. How is it different from a method?</p>
<ul>
<li>A constructor's name is the same as the class name. That's mandatory.</li>
<li>Constructors have no return type, while a method need a return type.</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li>Java lets you declare a method with the same name as your class. The thing that separates a method from a constructor is <strong>the return type</strong>.</li>
<li>Constructors are <strong>not inherited</strong>.</li>
</ul>
</div>
<p>The key feature of a constructor is that it runs <strong><em>before</em></strong> the object can be assigned to a reference.</p>
<h4 id="initializing-the-state-of-an-object">Initializing the state of an object<a class="headerlink" href="#initializing-the-state-of-an-object" title="Permanent link">&para;</a></h4>
<p>Most people use constructors to initialize the state of an object. In other words, to make and assign values to the object's instance variables. </p>
<p>And all you need to do is make a constructor with arguments:</p>
<p> <div class=codehilite><pre><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Duck</span> <span class=o>{</span>
    <span class=kt>int</span> <span class=n>size</span><span class=o>;</span>
    <span class=c1>// Add an int parameter to the Duck constructor</span>
    <span class=kd>public</span> <span class=nf>Duck</span><span class=o>(</span><span class=kt>int</span> <span class=n>duckSize</span><span class=o>)</span> <span class=o>{</span>
        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&quot;Quack&quot;</span><span class=o>);</span>
        <span class=c1>// use the argument value to set the size instance variable.</span>
        <span class=n>size</span> <span class=o>=</span> <span class=n>duckSize</span><span class=o>;</span>
        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&quot;size is &quot;</span> <span class=o>+</span> <span class=n>size</span><span class=o>);</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=nf>Duck</span><span class=o>()</span> <span class=o>{</span>
        <span class=c1>//supply default size</span>
        <span class=n>size</span> <span class=o>=</span> <span class=mi>27</span><span class=o>;</span>
    <span class=o>}</span>
<span class=o>}</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>UseADuck</span> <span class=o>{</span>
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
        <span class=c1>// Pass a value to the constructor</span>
        <span class=n>Duck</span> <span class=n>d</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Duck</span><span class=o>(</span><span class=mi>42</span><span class=o>);</span>
    <span class=o>}</span>
<span class=o>}</span>
</pre></div></p>
<p>If you have more than one constructor in a class, it means you have <strong><em>overloaded</em></strong> constructors. <strong>The constructors MUST have different arguments lists</strong>. Different arguments lists means different variable <em>type</em>(int, Dog, etc.) and <em>order</em>.</p>
<p>If you write a constructor that takes arguments, and you still want a no-arg constructor, you'll have to build the no-arg constructor yourself! Because the compiler won't make a default constructor if you have any constructors.</p>
<h4 id="constructor-chaining">constructor chaining<a class="headerlink" href="#constructor-chaining" title="Permanent link">&para;</a></h4>
<p>When an object is created, the object gets space for <em>all</em> instance variables, from all the way up the inheritance tree.</p>
<p><strong><em>All the constructors in an object's inheritance tree must run when you make a new object.</em></strong> When a constructor runs, it immediately calls its superclass constructor, all the way up the chain until you get to the class <code class="codehilite">Object</code> constructor (called <strong>constructor chaining</strong>(构造函数链)).</p>
<p>eg. A new Hippo object also IS-A Animal and IS-A Object. If you want to make a Hippo, you must also make the Animal and Object parts of the Hippo.</p>
<p><img alt="construcotr_chaining" src="../figures/construcotr_chaining-1.png" /></p>
<p> <div class=codehilite><pre><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Animal</span> <span class=o>{</span> 
    <span class=kd>public</span> <span class=nf>Animal</span><span class=o>()</span> <span class=o>{</span> 
        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=err>“</span><span class=n>Making</span> <span class=n>an</span> <span class=n>Animal</span><span class=err>”</span><span class=o>);</span> 
    <span class=o>}</span> 
<span class=o>}</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>Hippo</span> <span class=kd>extends</span> <span class=n>Animal</span> <span class=o>{</span> 
    <span class=kd>public</span> <span class=nf>Hippo</span><span class=o>()</span> <span class=o>{</span> 
        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=err>“</span><span class=n>Making</span> <span class=n>a</span> <span class=n>Hippo</span><span class=err>”</span><span class=o>);</span> 
    <span class=o>}</span>
<span class=o>}</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>TestHippo</span> <span class=o>{</span>
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span> <span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span> <span class=o>{</span> 
        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=err>“</span><span class=n>Starting</span><span class=o>...</span><span class=err>”</span><span class=o>);</span> 
        <span class=n>Hippo</span> <span class=n>h</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Hippo</span><span class=o>();</span> 
        <span class=o>}</span>
<span class=o>}</span>
</pre></div></p>
<p><img alt="hippo_animal_constructo" src="../figures/hippo_animal_constructor.png" /></p>
<h4 id="invoke-a-superclass-constructor">invoke a superclass constructor<a class="headerlink" href="#invoke-a-superclass-constructor" title="Permanent link">&para;</a></h4>
<p>The only way to call a superclass constructor is by calling <code class="codehilite">**super()</code>**.</p>
<p> <div class=codehilite><pre><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Duck</span> <span class=kd>extends</span> <span class=n>Animal</span> <span class=o>{</span>
    <span class=kt>int</span> <span class=n>size</span><span class=o>;</span>

    <span class=kd>public</span> <span class=nf>Duck</span><span class=o>(</span><span class=kt>int</span> <span class=n>newSize</span><span class=o>)</span> <span class=o>{</span>
        <span class=kd>super</span><span class=o>();</span>
    <span class=o>}</span>
<span class=o>}</span>
</pre></div></p>
<p>A call to <code class="codehilite">super()</code> in your constructor puts the superclass constructor on the top of the Stack. And that superclass constructor calls its superclass constructor. And so it goes until the Object constructor is on the top of the Stack. Once <code class="codehilite">Object()</code> finishes, it's popped off the Stack and goes until the original constructor is on the top of the Stack.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The compiler will put a call to <code class="codehilite">super()</code> in <strong>each</strong> of your overloaded constructors, if you do <em>not</em> have calls to <code class="codehilite">super()</code>.</p>
</div>
<p><strong><em>The superclass parts of an object have to be fully-formed (completely built) before the subclass parts can be constructed.</em></strong> So the call to <code class="codehilite">Super()</code> must be  the <em>first</em> statement in each constructor!</p>
<h4 id="this"><code class="codehilite">this</code><a class="headerlink" href="#this" title="Permanent link">&para;</a></h4>
<p><code class="codehilite">this</code> is a <strong>reference</strong> to <em>the current object</em>.  </p>
<ul>
<li><code class="codehilite">this()</code> calls the real constructor and let the real constructor finish the job of construction.</li>
<li>The call to <code class="codehilite">this()</code> can be used only in a constructor, and must be the <strong><em>first</em></strong> statement in a constructor.</li>
<li>A constructor can have a call to <code class="codehilite">super()</code> or <code class="codehilite">this()</code>, but never both!</li>
</ul>
<p> <div class=codehilite><pre><span class=kd>class</span> <span class=nc>Mini</span> <span class=kd>extends</span> <span class=n>Car</span> <span class=o>{</span>
    <span class=n>Color</span> <span class=n>color</span><span class=o>;</span>
    <span class=kd>public</span> <span class=nf>Mini</span><span class=o>()</span> <span class=o>{</span> 
        <span class=c1>// The no-arg constructor supplies a default Color</span>
        <span class=c1>// and calls the overloaded Real Constructor (the one that calls super())</span>
        <span class=k>this</span><span class=o>(</span><span class=n>Color</span><span class=o>.</span><span class=na>Red</span><span class=o>);</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=nf>Mini</span><span class=o>(</span><span class=n>Color</span> <span class=n>c</span><span class=o>)</span> <span class=o>{</span> 
        <span class=c1>// The is the Real Constructor that does the real work of initializing the object</span>
        <span class=kd>super</span><span class=o>(</span><span class=err>“</span><span class=n>Mini</span><span class=err>”</span><span class=o>);</span>   
        <span class=n>color</span> <span class=o>=</span> <span class=n>c</span><span class=o>;</span> 
        <span class=c1>// more initialization </span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=nf>Mini</span><span class=o>(</span><span class=kt>int</span> <span class=n>size</span><span class=o>)</span> <span class=o>{</span> 
        <span class=c1>// Won&#39;t work!! Can&#39;t have super() and this() in the same constructor</span>
        <span class=c1>// because they each must be the first statement!</span>
        <span class=k>this</span><span class=o>(</span><span class=n>Color</span><span class=o>.</span><span class=na>Red</span><span class=o>);</span> 
        <span class=kd>super</span><span class=o>(</span><span class=n>size</span><span class=o>);</span>
    <span class=o>}</span>
<span class=o>}</span>
</pre></div></p>
<h3 id="3-object-lifespan">3 Object lifespan<a class="headerlink" href="#3-object-lifespan" title="Permanent link">&para;</a></h3>
<p>An Object's life depends entirely on the life of references referring to it.</p>
<ul>
<li>If the reference is considered "alive", the object is still alive on the Heap.</li>
<li>If the reference dies, the object will die.</li>
</ul>
<p>So if an object's life depends on the reference variable's life, how long does a variable live?</p>
<ul>
<li>A <em>local</em> variable lives only within the method that declared the variable.</li>
<li>An <em>instance</em> variable lives as long as the object does. If the object is still alive, so are its instance variables.</li>
</ul>
<p>The difference between <strong>life</strong> and <strong>scope</strong> for local variables:</p>
<ul>
<li><strong>Life</strong>: a local variable is alive as long as its Stack frame is  on the Stack.</li>
<li><strong>Scope</strong>: a local variable is in <em>scope</em> only within the method in which the variable was declared. You can use a variable only when it is in scope.</li>
</ul>
<h4 id="object-lifecycle">Object lifecycle<a class="headerlink" href="#object-lifecycle" title="Permanent link">&para;</a></h4>
<p>An object's life has no value, no meaning, no point, unless somebody has a reference to it. Because if you can't get to it, you can't ask it to do anything and it's just a big fat waste of bits.</p>
<p>An object becomes eligible for Garbage Collector(垃圾收集器) when its last live reference disappear.</p>
<p>Object-killer</p>
<ul>
<li>Reference goes out of scope, permanently.</li>
<li>Assign the reference to another object.</li>
<li>Explicitly set the reference to null.</li>
</ul></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '../..';</script>
        <script src="../../js/base.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
        <script src="../../extra_javascript/tabhack.js"></script>
        <script src="../../search/require.js"></script>
        <script src="../../search/search.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td><kbd>&larr;</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td><kbd>&rarr;</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>


    </body>
</html>
