<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Global Site Tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-59055167-2"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments)};
          gtag('js', new Date());

          gtag('config', 'UA-59055167-2');
        </script>

        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">

	<title></title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <link href="../../css/base.css" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,400italic,500,600" rel="stylesheet">
        <link href="../../extra_css/custom.css" rel="stylesheet">
        <link href="../../extra_css/custom.js" rel="stylesheet">
        <link href="../../extra_css/friendly.css" rel="stylesheet">
        <link href="../../extra_css/theme.css" rel="stylesheet">
        <link href="../../extra_css/mkdocs/js/lunr-0.5.7.min.js" rel="stylesheet">
        <link href="../../extra_css/mkdocs/js/mustache.min.js" rel="stylesheet">
        <link href="../../extra_css/mkdocs/js/require.js" rel="stylesheet">
        <link href="../../extra_css/mkdocs/js/search.js" rel="stylesheet">
        <link href="../../extra_css/mkdocs/js/text.js" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href=""></a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">OSC <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li>
                            <a href="../../osc/">Contents</a>
                        </li>
                      
                        <li>
                            <a href="../../osc/ch1/">Chapter 1: Introduction </a>
                        </li>
                      
                        <li>
                            <a href="../../osc/ch2/">Chapter 2: Operating System structures</a>
                        </li>
                      
                        <li>
                            <a href="../../osc/ch3/">Chapter 3: Processes</a>
                        </li>
                      
                        <li>
                            <a href="../../osc/ch4/">Chapter 4: Threads and Concurrency</a>
                        </li>
                      
                        <li>
                            <a href="../../osc/ch5/">Chapter 5: CPU Scheduling</a>
                        </li>
                      
                        <li>
                            <a href="../../osc/ch6/">Chapter 6: Synchronization Tools</a>
                        </li>
                      
                        <li>
                            <a href="../../osc/ch7/">Chapter 7: Synchronization Examples</a>
                        </li>
                      
                        <li>
                            <a href="../../osc/ch8/">Chapter 8: Deadlocks</a>
                        </li>
                      
                        <li>
                            <a href="../../osc/ch9/">Chapter 9: Main Memory</a>
                        </li>
                      
                        <li>
                            <a href="../../osc/ch13/">Chapter 13: File-System Interfaces</a>
                        </li>
                      
                    </ul>
                </li>
            <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">CSAPP <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li>
                            <a href="../../csapp/">Contents</a>
                        </li>
                      
                        <li>
                            <a href="../../csapp/ch1/">Chapter 1: 计算机系统漫游</a>
                        </li>
                      
                        <li>
                            <a href="../../csapp/ch2/">Chapter 2: 信息的表示和处理</a>
                        </li>
                      
                        <li>
                            <a href="../../csapp/ch3/">Chapter 3: 程序的机器级表示</a>
                        </li>
                      
                        <li>
                            <a href="../../csapp/ch4/">Chapter 4: 处理器体系结构</a>
                        </li>
                      
                        <li>
                            <a href="../../csapp/ch5/">Chapter 5: 优化程序性能</a>
                        </li>
                      
                        <li>
                            <a href="../../csapp/ch6/">Chapter 6: 存储器层次结构</a>
                        </li>
                      
                        <li>
                            <a href="../../csapp/ch7/">Chapter 7: 链接</a>
                        </li>
                      
                        <li>
                            <a href="../../csapp/ch8/">Chapter 8: 异常控制流</a>
                        </li>
                      
                        <li>
                            <a href="../../csapp/ch9/">Chapter 9: 虚拟内存</a>
                        </li>
                      
                        <li>
                            <a href="../../csapp/ch10/">Chapter 10: 系统级I/O</a>
                        </li>
                      
                        <li>
                            <a href="../../csapp/ch11/">Chapter 11: 网络编程</a>
                        </li>
                      
                    </ul>
                </li>
            <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">HFJ <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li>
                            <a href="../">Contents</a>
                        </li>
                      
                        <li>
                            <a href="../ch1/">Chapter 1: Dive in A Quick Dip</a>
                        </li>
                      
                        <li>
                            <a href="../ch2/">Chapter 2: Classes and Objects</a>
                        </li>
                      
                        <li>
                            <a href="../ch3/">Chapter 3: Primitives and References</a>
                        </li>
                      
                        <li>
                            <a href="../ch4/">Chapter 4: Methods use Instance Variables</a>
                        </li>
                      
                        <li>
                            <a href="../ch5/">Chapter 5: Writing a Program</a>
                        </li>
                      
                        <li>
                            <a href="../ch6/">Chapter 6: Get to Know the Java API</a>
                        </li>
                      
                        <li>
                            <a href="../ch7/">Chapter 7: Inheritance and Polymorphism</a>
                        </li>
                      
                        <li>
                            <a href="../ch8/">Chapter 8: Interfaces and Abstract Classes</a>
                        </li>
                      
                        <li>
                            <a href="../ch9/">Chapter 9: Constructors and Garbage Collection</a>
                        </li>
                      
                        <li>
                            <a href="../ch10/">Chapter 10: Numbers and Statics</a>
                        </li>
                      
                        <li class="active">
                            <a href="./">Chapter 11: Exception Handling</a>
                        </li>
                      
                        <li>
                            <a href="../ch12/">Chapter 12: Getting GUI</a>
                        </li>
                      
                        <li>
                            <a href="../ch13/">Chapter 13: Using Swing</a>
                        </li>
                      
                        <li>
                            <a href="../ch14/">Chapter 14: Serialization and File I/O</a>
                        </li>
                      
                        <li>
                            <a href="../ch15/">Chapter 15: Networking and Threads</a>
                        </li>
                      
                        <li>
                            <a href="../ch16/">Chapter 16: Collections and Generics</a>
                        </li>
                      
                        <li>
                            <a href="../ch17/">Chapter 17: Packages, Jars and Deployment</a>
                        </li>
                      
                        <li>
                            <a href="../ch18/">Chapter 18: Remote deploy with RMI</a>
                        </li>
                      
                    </ul>
                </li>
            
            </ul>
            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#chapter-11-exception-handling">Chapter 11 Exception Handling</a></li>
        <li class="main "><a href="#1-exception">1 Exception</a></li>
            <li><a href="#trycatch">try/catch</a></li>
            <li><a href="#checked-and-unchecked-exceptions">checked and unchecked exceptions</a></li>
            <li><a href="#flow-control-in-trycatch-blocks">Flow control in try/catch blocks</a></li>
            <li><a href="#finally-block">Finally block</a></li>
            <li><a href="#multiple-exceptions">Multiple exceptions</a></li>
            <li><a href="#polymorphic-exception">Polymorphic Exception</a></li>
            <li><a href="#duck-exception">Duck exception</a></li>
        <li class="main "><a href="#2-midi-music-player">2 MIDI Music Player</a></li>
            <li><a href="#making-actual-sound">Making actual sound</a></li>
            <li><a href="#midievent">MidiEvent</a></li>
    </ul>
</div></div>
            <div class="col-md-9" role="main">
              

<h3 id="chapter-11-exception-handling"><strong>Chapter 11 Exception Handling</strong><a class="headerlink" href="#chapter-11-exception-handling" title="Permanent link">&para;</a></h3>
<h3 id="1-exception">1 Exception<a class="headerlink" href="#1-exception" title="Permanent link">&para;</a></h3>
<p><strong>Methods in Java use exceptions to tell the calling code, "Something Bad Happened. I failed."</strong></p>
<ul>
<li>If a method can fail at runtime, a method has to declare the exceptions it might throw. </li>
<li>You may find a <strong>throws</strong> clause in the risky(exception-throwing) method'sdeclaration. </li>
<li><em>It's the risky method that <em>throws</em> the exception to <em>you</em>.</em></li>
</ul>
<div class="codehilite"><pre><span class="kd">public</span> <span class="kd">static</span> <span class="n">Sequencer</span> <span class="nf">getSequencer</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">MidiUnavailableException</span>
</pre></div>


<h4 id="trycatch">try/catch<a class="headerlink" href="#trycatch" title="Permanent link">&para;</a></h4>
<p>If you wrap the risky code in something called a <strong>try/catch</strong>, the compiler will relax.</p>
<p>A <strong>try/catch</strong> block tells the compiler that you <em>know</em> an exceptional thing could happen in the method you're calling, and that you're prepared to handle it.</p>
<p>An exception is an object of type <code>Exception</code>.</p>
<div class="codehilite"><pre><span class="k">try</span> <span class="o">{</span>
    <span class="c1">// do risky thing</span>
<span class="o">}</span> <span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span> <span class="c1">// its just like declaring a method argument</span>
    <span class="c1">// try to recover</span>
    <span class="c1">// This code only runs if an Exception is throw</span>
<span class="o">}</span>
</pre></div>


<h4 id="checked-and-unchecked-exceptions">checked and unchecked exceptions<a class="headerlink" href="#checked-and-unchecked-exceptions" title="Permanent link">&para;</a></h4>
<p>The compiler checks for everything except <strong>RuntimeExceptions</strong>.</p>
<p><img alt="Excetions_and_its_subclass" src="../figures/Excetions_and_its_subclass.png" /></p>
<ul>
<li>The compiler cares about all subclasses of Exception, unless they are a special type, RuntimeException.</li>
<li>Any exception class that extends RuntimeException gets a free pass.</li>
<li>RuntimeExceptions can be thrown anywhere, with or without throws declarations or try/catch blocks.</li>
<li>Most RuntimeExceptions come from a problem in your <strong>code logic</strong>, rather than a condition that fails at runtime in ways that you cannot predict or prevent.<ul>
<li>e.g. You <em>cannot</em> guarantee the server is up. You <em>cannot</em> guarantee the file is there. But you <em>can</em> make sure your code doesn't index of the end of an array.</li>
</ul>
</li>
</ul>
<h4 id="flow-control-in-trycatch-blocks">Flow control in try/catch blocks<a class="headerlink" href="#flow-control-in-trycatch-blocks" title="Permanent link">&para;</a></h4>
<ul>
<li>If the try <em>succeeds</em>, the code below the catch runs.</li>
<li>If the try <em>fails</em>, it throws an exception and the rest of the try block doesn't run. And the catch block runs.</li>
</ul>
<h4 id="finally-block">Finally block<a class="headerlink" href="#finally-block" title="Permanent link">&para;</a></h4>
<p><strong>A finally block is where you put code that must run regardless of an exception.</strong></p>
<ul>
<li>If the try block fails (an exception), flow control immediately moves to the catch block. When the catch block completes, the finally block runs.</li>
<li>If the try block succeeds (no exception), flow control skips over the catch block and moves to the finally block.</li>
<li>If the try or catch block has a return statement, finally block will still run! Flow jumps to the finally, then back to the return.</li>
</ul>
<div class="codehilite"><pre><span class="c1">// You have to turn off the oven no matter what!</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="n">turnOvenOn</span><span class="o">();</span> 
    <span class="n">x</span><span class="o">.</span><span class="na">bake</span><span class="o">();</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">BakingException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">ex</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span> 
<span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
    <span class="n">turnOvenOff</span><span class="o">();</span> 
<span class="o">}</span>
</pre></div>


<h4 id="multiple-exceptions">Multiple exceptions<a class="headerlink" href="#multiple-exceptions" title="Permanent link">&para;</a></h4>
<p>A method can throw <strong>multiple exceptions</strong> if it needs to. But a method's declaration must declare <em>all</em> the checked exceptions it can throw.</p>
<p>Stack the <em>catch</em> blocks under the <em>try</em>, one after the other.</p>
<div class="codehilite"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Laundry</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">doLaundry</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">PantsException</span><span class="o">,</span> <span class="n">LingerieException</span><span class="o">{</span> 
        <span class="c1">// code that could throw either exception </span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Foo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">go</span><span class="o">()</span> <span class="o">{</span> 
        <span class="n">Laundry</span> <span class="n">laundry</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Laundry</span><span class="o">();</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">laundry</span><span class="o">.</span><span class="na">doLaundry</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">catch</span><span class="o">(</span><span class="n">PantsException</span> <span class="n">pex</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// recovery code</span>
        <span class="o">}</span> <span class="k">catch</span><span class="o">(</span><span class="n">LingerieException</span> <span class="n">lex</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// recovery code</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p><img alt="clothingException" src="../figures/clothingException.png" /></p>
<p><strong>Multiple catch blocks must be ordered from smallest to biggest.</strong></p>
<ul>
<li>The higher up the inheritance tree, the bigger the catch "basket". (e.g. ClothingExceptions will catch TeeShirtException and ShirtException)</li>
<li>With catch blocks, the JVM simply starts at the first one and works its way down until it finds a catch that's <em>broad enough </em>to handle the exception.<ul>
<li>If your first catch block is `catch(Exception ex), the compiler knows there's no point in adding any others -- they'll never be reached.  </li>
</ul>
</li>
</ul>
<h4 id="polymorphic-exception">Polymorphic Exception<a class="headerlink" href="#polymorphic-exception" title="Permanent link">&para;</a></h4>
<p>Exceptions are objects. The benefit for it is that a method doesn't have to explicitly declare <em>every</em> possible exception it might throw; it can declare a <em>superclass</em> of the exceptions.</p>
<p><strong>You can DECLARE exceptions using a supertype of the exceptions you throw.</strong></p>
<div class="codehilite"><pre><span class="kd">public</span> <span class="kt">void</span> <span class="nf">doLaundry</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">ClothingException</span> <span class="o">{</span>  <span class="o">}</span>
</pre></div>


<p>Same thing with catch blocks. You don't have to write a catch for each possible exception as long as the catch (or catches) you have can handle any exception throw.</p>
<p><strong>You can CATCH exceptions using a supertype of the exception thrown.</strong></p>
<div class="codehilite"><pre><span class="k">try</span> <span class="o">{</span>
    <span class="n">laundry</span><span class="o">.</span><span class="na">doLaundry</span><span class="o">();</span>
<span class="o">}</span> <span class="k">catch</span><span class="o">(</span><span class="n">ClothingException</span> <span class="n">cex</span><span class="o">)</span> <span class="o">{</span> <span class="c1">// can catch any clothingException subclass.</span>
    <span class="c1">// recovery code</span>
<span class="o">}</span>
</pre></div>


<p>The mother of all catch arguments is type <strong>Exception</strong>; it will catch <em>any</em> exception, including runtime (unchecked) exceptions, so you probably won't use it outside of testing.</p>
<h4 id="duck-exception">Duck exception<a class="headerlink" href="#duck-exception" title="Permanent link">&para;</a></h4>
<p>If you don't want to handle an exception, you can <strong>duck</strong> it by <strong>declaring</strong> it.</p>
<div class="codehilite"><pre><span class="c1">// You don&#39;t REALLY throw it, but since you don&#39;t have a try/catch</span>
<span class="c1">// for the risky method you call, you are now the risky method.</span>

<span class="kd">public</span> <span class="kt">void</span> <span class="nf">foo</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">ReallyBadException</span> <span class="o">{</span> 
    <span class="c1">// call risky method without a try/catch    </span>
    <span class="n">laundry</span><span class="o">.</span><span class="na">doLaundry</span><span class="o">();</span> 
    <span class="o">}</span>
</pre></div>


<p>Ducking (by declaring) only delays the inevitable. Sooner or later, somebody has to deal with it.</p>
<p>But what if <code>main()</code> ducks the exception? </p>
<ul>
<li>The exception is thrown back to JVM and the JVM shuts down.</li>
</ul>
<div class="codehilite"><pre><span class="kn">import</span> <span class="nn">java.io.FileReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">test</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">go</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">String</span> <span class="n">fileName</span> <span class="o">=</span> <span class="s">&quot;imdonotexist.file&quot;</span><span class="o">;</span>
            <span class="n">FileReader</span> <span class="n">writer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileReader</span><span class="o">(</span><span class="n">fileName</span><span class="o">);</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ioexcept</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">ioexcept</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">finally</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Finally....&quot;</span><span class="o">);</span>

        <span class="o">}</span>
    <span class="o">}</span>


    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">test</span> <span class="n">test1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">test</span><span class="o">();</span>
        <span class="n">test1</span><span class="o">.</span><span class="na">go</span><span class="o">();</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;I&#39;m in main.&quot;</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h3 id="2-midi-music-player">2 MIDI Music Player<a class="headerlink" href="#2-midi-music-player" title="Permanent link">&para;</a></h3>
<p><strong>JavaSound</strong> is a collection of classes and interfaces added to Java starting with version 1.3. JavaSound is split into two parts: MIDI and Sampled. <strong>MIDI</strong> stands for <strong>Musical Instrument Digital Interface</strong>, and is a standard protocol for getting different kinds of electronic sound equipment to communicate.</p>
<p>MIDI data doesn't actually include any <em>sound</em>, but it does include the <em>instructions</em> that a MIDI-reading instrument can play back.</p>
<h4 id="making-actual-sound">Making actual sound<a class="headerlink" href="#making-actual-sound" title="Permanent link">&para;</a></h4>
<p>How it works in JavaSound:</p>
<p><img alt="making_actual_sound" src="../figures/making_actual_sound-1.png" /></p>
<ul>
<li><strong>Sequencer</strong>: It takes all the MIDI data and sends it to the right instruments. It's the thing that <em>plays</em> the music. Think of it like a <strong>music CD player</strong>.</li>
<li><strong>Sequence</strong>: It is the Song, the musical piece that the Sequencer will play.</li>
<li><strong>Track</strong>: The part of the Sequence that holds the actual information.</li>
<li><strong>MIDI Event</strong>: It is a message that the Sequence can understand.</li>
</ul>
<p>And you need FOUR steps:</p>
<ol>
<li>Get a <strong>Sequencer</strong> and open it: <code>Sequencer player = MidiSystem.getSequencer(); player.open();</code></li>
<li>Make a new <strong>Sequence</strong>: <code>Sequence seq = new Sequence(timing, 4);</code></li>
<li>Get a new <strong>Track</strong> from the Sequence: <code>Track t= seq.createTrack();</code></li>
<li>Fill the Track with <strong>MidiEvents</strong> and give the Sequence to the Sequencer: <code>t.add(myMidiEvent1); player.setSequence(seq);</code></li>
</ol>
<p><small></p>
<div class="codehilite"><pre><span class="kn">import</span> <span class="nn">javax.sound.midi.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MiniMiniMusicApp</span> <span class="o">{</span>   <span class="c1">// this is the first one</span>

     <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">MiniMiniMusicApp</span> <span class="n">mini</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MiniMiniMusicApp</span><span class="o">();</span>
        <span class="n">mini</span><span class="o">.</span><span class="na">play</span><span class="o">();</span>
     <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">play</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">try</span> <span class="o">{</span>
         <span class="c1">// make (and open) a sequencer, make a sequence and track</span>

         <span class="n">Sequencer</span> <span class="n">sequencer</span> <span class="o">=</span> <span class="n">MidiSystem</span><span class="o">.</span><span class="na">getSequencer</span><span class="o">();</span>         
         <span class="n">sequencer</span><span class="o">.</span><span class="na">open</span><span class="o">();</span>

         <span class="n">Sequence</span> <span class="n">seq</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Sequence</span><span class="o">(</span><span class="n">Sequence</span><span class="o">.</span><span class="na">PPQ</span><span class="o">,</span> <span class="mi">4</span><span class="o">);</span>
         <span class="n">Track</span> <span class="n">track</span> <span class="o">=</span> <span class="n">seq</span><span class="o">.</span><span class="na">createTrack</span><span class="o">();</span>     

         <span class="c1">// now make two midi events (containing a midi message)</span>
         <span class="n">MidiEvent</span> <span class="n">event</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

         <span class="c1">// first make the message</span>
         <span class="c1">// then stick the message into a midi event </span>
         <span class="c1">// and add the event to the track</span>
          <span class="n">ShortMessage</span> <span class="n">a</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ShortMessage</span><span class="o">();</span>
          <span class="n">a</span><span class="o">.</span><span class="na">setMessage</span><span class="o">(</span><span class="mi">144</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">44</span><span class="o">,</span> <span class="mi">100</span><span class="o">);</span>
          <span class="n">MidiEvent</span> <span class="n">noteOn</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MidiEvent</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span><span class="c1">//means at tick one, the above event happens</span>
          <span class="n">track</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">noteOn</span><span class="o">);</span>

          <span class="n">ShortMessage</span> <span class="n">b</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ShortMessage</span><span class="o">();</span>
          <span class="n">b</span><span class="o">.</span><span class="na">setMessage</span><span class="o">(</span><span class="mi">128</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">44</span><span class="o">,</span> <span class="mi">100</span><span class="o">);</span>
          <span class="n">MidiEvent</span> <span class="n">noteOff</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MidiEvent</span><span class="o">(</span><span class="n">b</span><span class="o">,</span> <span class="mi">16</span><span class="o">);</span><span class="c1">//means at tick one, the above event happens</span>
          <span class="n">track</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">noteOff</span><span class="o">);</span>

         <span class="c1">// add the events to the track</span>

          <span class="c1">// add the sequence to the sequencer, set timing, and start</span>
          <span class="n">sequencer</span><span class="o">.</span><span class="na">setSequence</span><span class="o">(</span><span class="n">seq</span><span class="o">);</span>

          <span class="n">sequencer</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
          <span class="c1">// new</span>
          <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span>
          <span class="n">sequencer</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
          <span class="n">System</span><span class="o">.</span><span class="na">exit</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
      <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span><span class="n">ex</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();}</span>
  <span class="o">}</span> <span class="c1">// close play</span>

<span class="o">}</span> <span class="c1">// close class</span>
</pre></div>


<p></small></p>
<h4 id="midievent">MidiEvent<a class="headerlink" href="#midievent" title="Permanent link">&para;</a></h4>
<p><strong>A MidiEvent says what to do and when to do it.</strong></p>
<div class="codehilite"><pre><span class="n">ShortMessage</span> <span class="n">a</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ShortMessage</span><span class="o">();</span>
<span class="n">a</span><span class="o">.</span><span class="na">setMessage</span><span class="o">(</span><span class="mi">144</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">44</span><span class="o">,</span> <span class="mi">100</span><span class="o">);</span>
<span class="n">MidiEvent</span> <span class="n">noteOn</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MidiEvent</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>
<span class="n">track</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">noteon</span><span class="o">);</span>
</pre></div>


<p>Explanation for the code above:</p>
<p>The instructions are in the message, but the MidiEvent adds the moment in time when the instruction should be triggered. This MidiEvent says to trigger message "a" at the first beat (beat 1).</p>
            </div>
        </div>

        <footer class="col-md-12">
            
        </footer>

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script src="../../js/base.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script src="../../search/require.js"></script>
        <script src="../../search/search.js"></script>
    </body>
</html>