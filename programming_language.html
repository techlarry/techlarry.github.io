<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  编程语言 - techlarry
  
  </title>
  
  
  <link href="atom.xml" rel="alternate" title="techlarry" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />
    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
  <script src="asset/highlightjs/highlight.pack.js"></script>
  <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script>hljs.initHighlightingOnLoad();</script>
<script type="text/javascript">
  function before_search(){
    var searchVal = 'site:larryim.cc ' + document.getElementById('search_input').value;
    document.getElementById('search_q').value = searchVal;
    return true;
  }
</script>
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>


  <section class="top-bar-section">
  <div class="row">
      <div style="position: relative;width:100%;"><div style="position: absolute; width:100%;">
        <ul id="main-menu" class="left">
        
        <li id=""><a target="_self" href="index.html">HomePage</a></li>
        
        <li id=""><a target="_self" href="archives.html">Archives</a></li>
        
        <li id=""><a target="_blank" href="wiki">WIKI</a></li>
        
        <li id=""><a target="_self" href="notebook.html">NOTEBOOK</a></li>
        
        <li id=""><a target="_self" href="about.html">About</a></li>
        
        <li id=""><a target="_blank" href="note">NOTE</a></li>
        
        </ul>

        <ul class="right" id="search-wrap">
          <li>
<form target="_blank" onsubmit="return before_search();" action="http://google.com/search" method="get">
    <input type="hidden" id="search_q" name="q" value="" />
    <input tabindex="1" type="search" id="search_input"  placeholder="Search"/>
</form>
</li>
          </ul>
      </div></div>
  </div>
  </section>

</nav>

        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; techlarry</span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
        
        <li><a target="_self" href="index.html">HomePage</a></li>
        
        <li><a target="_self" href="archives.html">Archives</a></li>
        
        <li><a target="_blank" href="wiki">WIKI</a></li>
        
        <li><a target="_self" href="notebook.html">NOTEBOOK</a></li>
        
        <li><a target="_self" href="about.html">About</a></li>
        
        <li><a target="_blank" href="note">NOTE</a></li>
        

    <li><label>Categories</label></li>

        
            <li><a href="Leetcode.html">Leetcode</a></li>
        
            <li><a href="programming_language.html">编程语言</a></li>
        
            <li><a href="data_structure_and_algorithm.html">数据结构和算法</a></li>
        
            <li><a href="Python%E7%89%B9%E6%80%A7.html">Python特性</a></li>
        
            <li><a href="%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0.html">机器学习</a></li>
        
            <li><a href="Python%E7%A7%91%E5%AD%A6%E8%AE%A1%E7%AE%97%E4%B8%89%E7%BB%B4%E5%8F%AF%E8%A7%86%E5%8C%96.html">Python科学计算三维可视化</a></li>
        
            <li><a href="English.html">English</a></li>
        
            <li><a href="Computer%20System.html">Computer System</a></li>
        
            <li><a href="Deep%20Learning.html">Deep Learning</a></li>
        
            <li><a href="Linux%20%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B.html">Linux 系统编程</a></li>
        
            <li><a href="%E6%95%B0%E6%8D%AE%E5%BA%93.html">数据库</a></li>
        
            <li><a href="Tensorflow.html">Tensorflow</a></li>
        
            <li><a href="Big%20Data.html">Big Data</a></li>
        
            <li><a href="%E6%96%87%E7%8C%AE%E9%98%85%E8%AF%BB.html">文献阅读</a></li>
        
            <li><a href="Tools.html">Tools</a></li>
         

      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>


        <section id="main-content" role="main" class="scroll-container">
        
       

 <script type="text/javascript">
	$(function(){
		$('#menu_item_index').addClass('is_active');
	});
</script>
<div class="row">
	<div class="large-8 medium-8 columns">
		<div class="markdown-body home-categories">
		
			<div class="article">
                <a class="clearlink" href="head-first_java_note.html">
                
                  <h1>Head first Java</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>Notes, Head first Java, 2nd Edition</p>

<ul>
<li>
<a href="#toc_0">1 Dive in A Quick Dip</a>
<ul>
<li>
<ul>
<li>
<a href="#toc_1">main method</a>
</li>
<li>
<a href="#toc_2">Looping</a>
</li>
<li>
<a href="#toc_3">Conditional branching</a>
</li>
<li>
<a href="#toc_4">Strongly-typed language</a>
</li>
<li>
<a href="#toc_5">Dynamic Binding</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<a href="#toc_6">2 Classes and objects</a>
<ul>
<li>
<a href="#toc_7">2.1 Object Oriented</a>
</li>
<li>
<a href="#toc_8">2.2 Class</a>
</li>
<li>
<a href="#toc_9">2.3 main</a>
</li>
</ul>
</li>
<li>
<a href="#toc_10">3 Primitives and references</a>
<ul>
<li>
<a href="#toc_11">3.1 primitive variable</a>
</li>
<li>
<a href="#toc_12">3.2 Reference variable</a>
</li>
<li>
<a href="#toc_13">3.3 Array</a>
</li>
</ul>
</li>
<li>
<a href="#toc_14">4 Methods use instance variables</a>
<ul>
<li>
<a href="#toc_15">4.1 Methods</a>
</li>
<li>
<a href="#toc_16">4.2 Getters and setters</a>
</li>
<li>
<a href="#toc_17">4.3 Encapsulation</a>
</li>
<li>
<a href="#toc_18">4.4 Instance variables</a>
</li>
<li>
<a href="#toc_19">4.5 Instance and local variables</a>
</li>
<li>
<a href="#toc_20">4.6 Comparing variables</a>
</li>
</ul>
</li>
<li>
<a href="#toc_21">5 Writing a Program</a>
</li>
<li>
<a href="#toc_22">6  Get to know the Java API</a>
</li>
<li>
<a href="#toc_23">7 Inheritance and polymorphism</a>
<ul>
<li>
<a href="#toc_24">7.1 overriding</a>
</li>
<li>
<a href="#toc_25">7.2 Polymorphism</a>
</li>
<li>
<a href="#toc_26">7.3 Method overloading</a>
</li>
</ul>
</li>
<li>
<a href="#toc_27">8 Interfaces and abstract classes</a>
<ul>
<li>
<a href="#toc_28">8.1 Abstract classes</a>
</li>
<li>
<a href="#toc_29">8.2 Abstract methods</a>
</li>
<li>
<a href="#toc_30">8.3 The ultimate superclass: Object</a>
</li>
<li>
<a href="#toc_31">8.4 Using polymorphic references of type Object has a price</a>
</li>
<li>
<a href="#toc_32">8.5 Interface</a>
</li>
<li>
<a href="#toc_33">8.6 Using <code>super</code></a>
</li>
</ul>
</li>
<li>
<a href="#toc_34">9 Constructors and garbage collection</a>
</li>
<li>
<a href="#toc_35">10 Numbers and statics</a>
</li>
</ul>


<h2 id="toc_0">1 Dive in A Quick Dip</h2>

<p>Java has friendly syntax, object-oriented features, memory management, and best of all - the promise of probability ( <u>write-one/run-anywhere</u> ).</p>

<p>You type a source code file(<code>.java</code>). compile it using the <code>javac</code> compiler, then run(<code>java</code>) the compiled bytecode(<code>.class</code>) on a java virtual machine.</p>

<p><img src="media/15321391987415/code_structure.png" alt="code_structure"/></p>

<h4 id="toc_1">main method</h4>

<p>Every Java application has to have at least one class, and at least one <code>main</code> method.</p>

<p>The <code>main</code> method is where your program starts running.</p>

<pre><code class="language-java">public static void main(String[] args){
    //your code goes here
}
</code></pre>

<h4 id="toc_2">Looping</h4>

<p>Java has three standard looping constructs: <code>while</code>, <code>do-while</code>, and <code>for</code>.</p>

<pre><code class="language-java">while ( ) {

}


</code></pre>

<p>A boolean and an integer are not compatible types in Java.</p>

<pre><code class="language-text">int x=1;
while (x) {} //wrong
</code></pre>

<h4 id="toc_3">Conditional branching</h4>

<pre><code class="language-java">if (conditional test) {
} else {
}
</code></pre>

<p><strong>Note</strong>: <code>System.out.println</code> inserts a newline, <code>System.out.print</code> keeps printing to the same line.</p>

<h4 id="toc_4">Strongly-typed language</h4>

<p>Java is a <strong>strongly typed language</strong>(强类型语言) and that means I can&#39;t allow variables to hold data of the wrong type.</p>

<h4 id="toc_5">Dynamic Binding</h4>

<p>However, There are some datatype exceptions that can emerge at runtime, but some of those have to be allowed to support one of Java&#39;s other important features -- <strong>dynamic binding</strong>(动态绑定).</p>

<p>Here are a few important differences between <strong>static</strong> and <strong>dynamic</strong> binding in Java [<a href="https://stackoverflow.com/questions/19017258/static-vs-dynamic-binding-in-java">ref</a>]:</p>

<ol>
<li>Static binding in Java occurs during <strong>compile</strong> time while dynamic binding occurs during <strong>runtime</strong>.</li>
<li><code>private</code>, <code>final</code> and <code>static</code> methods and variables use static binding and are bonded by compiler while virtual methods are bonded during runtime based upon runtime object.</li>
<li>Static binding uses Type (class in Java) information for binding while dynamic binding uses object to resolve binding.</li>
<li>Overloaded methods are bonded using static binding while overridden methods are bonded using dynamic binding at runtime.</li>
</ol>

<p>Static Binding Example in Java:</p>

<pre><code class="language-java">public class StaticBindingTest {  
    public static void main(String args[]) {
        Collection c = new HashSet();
        StaticBindingTest et = new StaticBindingTest();
        et.sort(c);
    }
    //overloaded method takes Collection argument
    public Collection sort(Collection c) {
        System.out.println(&quot;Inside Collection sort method&quot;);
        return c;
    }
    //another overloaded method which takes HashSet argument which is sub class
    public Collection sort(HashSet hs) {
        System.out.println(&quot;Inside HashSet sort method&quot;);
        return hs;
    }
}
</code></pre>

<p>Example of Dynamic Binding in Java:</p>

<pre><code class="language-java">public class DynamicBindingTest {   
    public static void main(String args[]) {
        Vehicle vehicle = new Car(); //here Type is vehicle but object will be Car
        vehicle.start(); //Car&#39;s start called because start() is overridden method
    }
}

class Vehicle {
    public void start() {
        System.out.println(&quot;Inside start method of Vehicle&quot;);
    }
}

class Car extends Vehicle {
    @Override
    public void start() {
        System.out.println(&quot;Inside start method of Car&quot;);
    }
}
</code></pre>

<h2 id="toc_6">2 Classes and objects</h2>

<h3 id="toc_7">2.1 Object Oriented</h3>

<p>What do you like about OO? Some people say...</p>

<ul>
<li>It helps me design in a more natural way. Things have a way of evolving.</li>
<li>Not messing around with the code I&#39;ve already tested, just to add a new feature.</li>
<li>Reusing code in other applications. When I write a new class, I can make it flexible enough to be used in something new, later</li>
</ul>

<h3 id="toc_8">2.2 Class</h3>

<p>A class describes what an object <strong>knows</strong>(instance variables) and what an object <strong>does</strong>(methods).</p>

<p><img src="media/15321391987415/class.png" alt="class"/></p>

<p>What&#39;s the <strong>difference</strong> between a class and an object?</p>

<ul>
<li>A class is not an object. A class is the blueprint for an object. It tells the JVM <em>how</em> to make an object of that particular type. Each object made from that class have its <em>own</em> values for the instance variables of that class.</li>
</ul>

<p><img src="media/15321391987415/one_class_many_objects.png" alt="one_class_many_objects"/></p>

<h3 id="toc_9">2.3 main</h3>

<p>The two uses of main:</p>

<ul>
<li>to <strong><em>test</em></strong> your real class</li>
<li>to <strong><em>launch/start</em></strong> your Java application.</li>
</ul>

<h2 id="toc_10">3 Primitives and references</h2>

<p>Variables must always be declared with a name and a type. Variables come in two flavors: <strong>primitive</strong> and <strong>reference</strong>.(变量的生命必须有类型和名称。变量有两种：primitive和引用)</p>

<h3 id="toc_11">3.1 primitive variable</h3>

<p>A <em>primitive variable</em> value is the bits representing the value. primitive变量的值是表示该值的位。</p>

<h3 id="toc_12">3.2 Reference variable</h3>

<ul>
<li>A reference variable value is the bits representing a way to get to an object on the heap.引用变量的值是表示一种到达堆上的对象的方法的位。</li>
<li>A reference variable is like a remote control. Using the dot operator(<code>.</code>) on a reference variable is like pressing a button on the remote control to access a method or instance variables.</li>
<li>A reference variable has a value of <code>null</code> when it is not referencing any object.</li>
</ul>

<h3 id="toc_13">3.3 Array</h3>

<ul>
<li>An array is always an object, even if the array is declared to hold primitives. </li>
<li>Every element in an array is just a variable.</li>
</ul>

<p><u>The three steps of <strong>object declaration, creation and assignment</strong>.</u></p>

<p>(e.g. <code>Dog myDog = new Dog()</code>);</p>

<ul>
<li><strong>declare</strong> a reference variable: tell the JVM to allocate space for a reference variable, and names that variable myDog</li>
<li><strong>create</strong> an object: tells the JCM to allocate space for a new Dog object on the heap.</li>
<li><strong>Assigns</strong> the object to the reference variable.</li>
</ul>

<p><img src="media/15321391987415/three%20steps%20of%20object%20declaration,%20creation,%20and%20assignment.png" alt="three steps of object declaration, creation, and assignment"/></p>

<h2 id="toc_14">4 Methods use instance variables</h2>

<h3 id="toc_15">4.1 Methods</h3>

<p><strong>Class define what an object knows and what an object does.</strong> Things an object knows are its <em>instance variables</em>(state), things an object does are its <em>methods</em>(behavior).</p>

<p><strong>Methods</strong>:<br/>
<strong>A method uses parameters. A caller passes arguments.</strong></p>

<ul>
<li>Arguments are the things you pass into the methods.</li>
<li>If a method takes a parameters, you must pass it something.</li>
<li>Methods can return values. Every method is declared is declared with a return type.</li>
<li>If you declare a method to return a value, you <em>must</em> return a value of the declared type or a value that is <em>compatible</em> with the declared type.</li>
<li>Java is <strong>pass-by-value</strong>, which means <strong>pass-by-copy</strong>.</li>
</ul>

<h3 id="toc_16">4.2 Getters and setters</h3>

<p><strong>Getters</strong> and <strong>setters</strong> let you, well, <em>get and set things</em>.</p>

<ul>
<li>A Getter&#39;s sole purpose in life is to send back, as a return value, the value of whatever it is that particular Getter is supposed to be Getting.</li>
</ul>

<h3 id="toc_17">4.3 Encapsulation</h3>

<p>By forcing everybody to call a setter method, we can protect variables from unacceptable changes.</p>

<pre><code class="language-java">theCat.height = 0 //yikes! we can&#39;t let this happen

public void setHeight(int ht){
    if (ht&gt;9){ // we put in checks to guarantee a minimum cat height.
        height=ht;
    }
}
</code></pre>

<p>An <strong>encapsulation</strong> <em>starter</em> rule of thumb: <u>mark your instances variables <strong><em>private</em></strong>, and provide <strong><em>public</em></strong> getters and setters for access control.</u></p>

<ul>
<li>Encapsulations puts a force-field around instance variables, so nobody can set them to something <em>inappropriate</em>.</li>
<li>The point to setters (and getters, too) is that <strong><em>you can change your mind later, without breaking anybody else’s code</em></strong>!</li>
</ul>

<pre><code class="language-java">class GoodDog {
    private int size; //Make the instance variable private
    public int getSize() { // make the getter methods public
        return size; 
    }

    public void setSize(int s) {  // make the setter methods public
        size = s; 
    }

    // even though the methods don&#39;t really add new functionality,
    // the cool thing is that you can change your mind later.
    // you can come back and make a method safer, faster, better
    void bark() {
        if (size &gt; 60) { 
            System.out.println(“Wooof! Wooof!”); 
        } else if (size &gt; 14) {
            System.out.println(“Ruff! Ruff!”); } 
        else {
            System.out.println(“Yip! Yip!”); 
        }
    }
}
</code></pre>

<h3 id="toc_18">4.4 Instance variables</h3>

<p>You don&#39;t have to initialize instance variables, because they always have a default value:</p>

<ul>
<li>intergers: 0</li>
<li>floating points: 0.0</li>
<li>booleans: false</li>
<li>references: null</li>
</ul>

<h3 id="toc_19">4.5 Instance and local variables</h3>

<p>The difference between instance and local variables:</p>

<ul>
<li><strong>Instance</strong> variables are declared <u>inside a class</u> but not within a method.</li>
<li><strong>Local</strong> variables are declares <u>within a method</u> .</li>
<li><strong>Local</strong> variables <u>must be initialized</u> before use.</li>
</ul>

<h3 id="toc_20">4.6 Comparing variables</h3>

<p>If you want to know if two objects are <strong>equal</strong>, you need the <code>.equal()</code> method.</p>

<ul>
<li>whether two different objects should be treated as equal depends on what makes sense for that particular object type. (e.g. dog/string)</li>
</ul>

<pre><code class="language-java">String S = &quot;baby&quot;;
S.equal(another_string);
</code></pre>

<p>To see if two reference are the same (which means they refer to the same object on the heap) use the <code>==</code> operator.</p>

<pre><code class="language-text">Foo a = new Foo(); 
Foo b = new Foo(); 
Foo c = a; 
if (a == b) { // false } 
if (a == c) { // true } 
if (b == c) { // false }
</code></pre>

<p>To compare two primitives, use the <code>==</code> operator.</p>

<ul>
<li>Operator <code>==</code> doesn&#39;t care about the size of the variable, so all the extra zeros on the left end don&#39;t matter.</li>
</ul>

<pre><code class="language-java">int a = 3;
byte b = 3;
if (a==b){ //true}
</code></pre>

<h2 id="toc_21">5 Writing a Program</h2>

<ul>
<li><strong>prep code</strong>: a form of pseudocode, to help you focus on the logic without stressing about syntax. 一种伪代码</li>
<li><strong>test code</strong>: a class or methods that will test the real code and validate that it&#39;s doing the right thing. 测试代码</li>
<li><strong>real code</strong>: the actual implementation of the class. 真实代码</li>
</ul>

<p><strong>Extreme Programming</strong>（<a href="https://en.wikipedia.org/wiki/Extreme_programming">极限编程</a>):</p>

<ul>
<li>Write the test code first</li>
<li>Make small, but frequent, releases</li>
<li>Develop in iteration cycles.</li>
</ul>

<h2 id="toc_22">6  Get to know the Java API</h2>

<p><code>ArrayList</code> is a class in the core Java library (the API).</p>

<ul>
<li> <code>boolean add(Object elem)</code>: Adds the objects parameter to the list(return <code>true</code>).</li>
<li> <code>boolean remove(int index)</code>: Removes the object at the index parameter. Returns <code>true</code> if the element was in the list.</li>
<li> <code>boolean remove(Object elem)</code>: Removes this object(if it&#39;s in the ArrayList).</li>
<li> <code>boolean contains(Object elem)</code>: Returns <code>true</code> if there&#39;s a match for the object parameter.</li>
<li> <code>boolean isEmpty()</code>: Returns <code>true</code> if the list has no elements</li>
<li> <code>int indexOf(Object elem)</code>: Returns either the index of the object parameter, or -1</li>
<li> <code>size()</code>: Return the number of elements currently in the list.</li>
<li> <code>Object get(int index)</code>: Return the object currently at the index parameter.</li>
</ul>

<p>You have to know the full name of the class you want to use in your code. You have two options:</p>

<ul>
<li>Import: put an import statement at the top of your source code file:
<ul>
<li><code>import java.util.ArrayList</code></li>
</ul></li>
<li>Type: type the full name everywhere in your code. Each time you use it.
<ul>
<li><code>java.util.ArrayList&lt;Dog&gt; list = new java.util.ArrayList&lt;Dog&gt;();</code></li>
</ul></li>
</ul>

<h2 id="toc_23">7 Inheritance and polymorphism</h2>

<h3 id="toc_24">7.1 overriding</h3>

<p><strong>Overriding</strong>（重写) just means that a subclass redefines one of its inherited methods when it needs to change or extend the behavior of that method.</p>

<p>When one class inherits from another, the subclass inherits from the superclass. In Java, we say that the <strong>subclass extends the superclass</strong>.子类继承自父类。</p>

<p>Instance variables are not overridden because they don&#39;t need to be. They don&#39;t define any special behavior, so a subclass can give an inherited instance variable any value it chooses.实例变量无法被覆盖掉是因为不需要，它们并没有定义特殊的行为。</p>

<p>When you want to know if one thing should extend another, apply the IS-A test.若你想要知道某物是否应该要继承另一物时，则可以用IS-A(是一个)测试来检验。</p>

<p><strong>If class B extends class A, class B IS-A class A.</strong>   如果类B继承类A，那么类B是一个类A。</p>

<p>if your subclass overriding method, you can call the superclass version using the keyword <strong>super</strong>.</p>

<pre><code class="language-java">// this calls the inherited version on roam(),
// then comes back to do your own subclass-specific code
public void roam(){
    super.roam();
    //my own roam stuff
}
</code></pre>

<p>There are four access levels, moving from most restrictive to least, the four access levels are: 四种权限，左边是最受限制的，而越往右边限制程度越小：</p>

<p><strong>prive, default, protected, public</strong></p>

<ul>
<li>public members are inherited. public类型的成员会被继承</li>
<li>private members are not inherited. private类型的成员不会被继承</li>
</ul>

<p>Inheritances lets you guarantee that all classes grouped under a certain supertype have all the methods that the supertype has. In other words, you define a common protocol for a set of classes related through inheritance. 继承让你可以确保某个父类型之下的所有类都会有父类型所持有的全部方法。也就是说，你会通过继承来定义相关类间的共同协议。</p>

<p>when you define a supertype for a group of classes, any subclass of that supertype can be substituted where the supertype is expected.<br/>
当你定义出一组类的父型时，你可以用子型的任何类来填补任何需要或期待父型的位置。</p>

<h3 id="toc_25">7.2 Polymorphism</h3>

<p><strong>With polymorphism, the reference type can be a superclass of the actual object type</strong>. 运用多态时，引用类型可以是实际对象类型的父类。</p>

<pre><code class="language-java">Animal[] animals = new Animal[3];
animals [0] = new Dog();
animals [1] = new Cat();
animals [2] = new Lion();
for (int i=0; i&lt; animals.length; i++) {
    animals[i].eat();
    animals[i].roam();
}
</code></pre>

<p>You can have polymorphic arguments and return types. 参数和返回类型也可以多态。</p>

<pre><code class="language-java">class Vet {
    public void giveShot(Animal a) { 
    // do horrible things to the Animal at 
    // the other end of the ‘a’ parameter 
    a.makeNoise(); 
    }
}

class PetOwner {
    public void start() { 
        Vet v = new Vet(); 
        Dog d = new Dog(); 
        Hippo h = new Hippo(); 
        v.giveShot(d); 
        v.giveShot(h);
}
</code></pre>

<p>If I write my code using polymorphic arguments, where I declare the method parameter as a superclass type, I can pass in any subclass object at runtime. 如果我将程序代码编写使用多态参数，也就是说将参数声明为父类类型，我就可以在运行时传入任何的子类对象。</p>

<p>With polymorphism, you can write code that doesn&#39;t have to change when you introduce new subclass types into the program. 通过多态，你就可以编写出引进新型子类时也不必修改的程序。</p>

<p>There are three things that can prevent a class from being subclassed.</p>

<ul>
<li>A class can be non-public (if you don&#39;t declare the class as public. A non-public class can be subclassed only by classes in the same package as the class. 类可以是非公有的，非公有的类只能被同一个包的类作出子类。</li>
<li>Using keyword modifier <code>final</code> to stop  a class from being subclassed. 使用<code>final</code>修饰符阻止类被继承。</li>
<li>If a class has only <code>private</code> constructors, it can&#39;t be subclassed. 如果类只拥有<code>private</code>的构造程序，它不能被继承。</li>
</ul>

<p>If you want to protect a specific method from being overridden, mark the method with the <code>final</code> modifier. 如果你想要防止特定的方法被覆盖，可以将该方法标识成final表示没有任何的方法可以被覆盖。</p>

<p><strong>Rules for overriding</strong>:</p>

<ul>
<li>Arguments must be the same, and return types must be compatible. 参数必须要一样，且返回类型必须要兼容</li>
<li>The method can&#39;t be less accessible. 不能降低方法的访问权限</li>
</ul>

<h3 id="toc_26">7.3 Method overloading</h3>

<p><strong>Method overloading</strong>(方法重载) is nothing more than having two methods with the same name but different argument lists. 方法重载就是方法名称相同，但参数列表不同。 </p>

<ul>
<li>Purpose: overloading lets you make multiple versions of a method, with different argument lists, for convenience to the callers.  重载可以有同一方法的多个不同参数列表的版本，方便了调用者。</li>
<li>The return types can be different 返回类型可以不同</li>
<li>You can&#39;t change only the return type 不能只改变返回类型</li>
<li>You can vary the access levels in any direction 可以更改访问权限</li>
</ul>

<h2 id="toc_27">8 Interfaces and abstract classes</h2>

<p>What&#39;s an interface? it&#39;s a 100% abstract class. <br/>
What&#39;s an abstract class? it&#39;s a class that can&#39;t be instantiated.</p>

<h3 id="toc_28">8.1 Abstract classes</h3>

<p>Here&#39;s where it gets weird:</p>

<pre><code class="language-text">Animal anim = new Animal(); 
</code></pre>

<p>There two are the same type, but what the heck does an Animal object look like?</p>

<p><strong>Some classes just should not be instantiated!</strong><br/>
How?  By marking the class as <strong>abstract</strong>, the compiler will stop any code, anywhere, from ever creating an instance of that type. i.e. prevent a class from ever being instantiated.</p>

<p>Making a class abstract before the class declaration:</p>

<pre><code class="language-java">abstract class Caine extends Animal {
    public void roam() {}
}
</code></pre>

<p>When you&#39;re designing your class inheritance structure, you have to decide which classes are <em>abstract</em> and which are <em>concrete</em>. </p>

<ul>
<li><strong>Concrete</strong> classes are those that are specific enough to be instantiated. </li>
<li>A <strong>concrete</strong> class just means that it&#39;s OK to make objects of that type.</li>
<li>An <strong>abstract class</strong> has virtually no use, no value, no purpose in life, unless it is extended.</li>
</ul>

<h3 id="toc_29">8.2 Abstract methods</h3>

<p>An <strong>abstract method</strong> means the method must be overriden, whereas an abstract class means the class must be extended.</p>

<ul>
<li>there isn&#39;t any code that would make sense in the abstract method, you won&#39;t put in a method body. e.g. <code>public abstract void eat()</code>.</li>
<li>If you declare an abstract method, you must mark the class abstract as well. You can&#39;t have an abstract method in a non-abstract class.</li>
<li>You must implement all abstract methods.</li>
</ul>

<h3 id="toc_30">8.3 The ultimate superclass: Object</h3>

<p>Every class in Java extends class Object. Class Object is the mother of all classes; it&#39;s the superclass of everything. </p>

<ul>
<li>Any class that doesn&#39;t <em>explicitly</em> extend another class, <em>implicitly</em> extends Object.</li>
</ul>

<p>Methods of Object class:</p>

<ul>
<li><code>equals()</code>: tell you if two objects are considered equal.</li>
<li><code>getClass()</code>: Gives you back the class that object was instantiated from.</li>
<li><code>hashCode()</code>: Prints out a hashcode for the object</li>
<li><code>toString()</code>: Prints out a String message with the name of the class and some other number we rarely care about.</li>
</ul>

<p>Object is a <strong>non-abstract</strong> class because it&#39;s got method implementation code that all classes can inherit and use out-of-box, without having to override the methods.</p>

<p>The Object class serves two main purpose:</p>

<ul>
<li>to act as a polymorphic type for methods that need to work on any class that you or anyone else makes 作为方法的多态类型</li>
<li>to provide real method code that all objects in Java need at runtime (and putting them in class Object means all other classes inherit them).提供Java在执行期堆任何对象都有需要的实现方法代码。</li>
</ul>

<h3 id="toc_31">8.4 Using polymorphic references of type Object has a price</h3>

<p>When you put an object into an <code>ArrayList&lt;Dog&gt;</code>, it goes in as a Dog, and comes out as a Dog:</p>

<pre><code class="language-java">// Make an ArrayList declared to hold Dog objects.
ArrayList&lt;Dog&gt; myDogArrayList = new ArrayList&lt;Dog&gt;();
// Make a Dog
Dog aDog = new Dog();
// Add the Dog to the list
myDogArrayList.add(aDog);
//Assign the Dog from the list to a new Dog reference variable
Dog d = myDogArrayList.get(0);
</code></pre>

<p><strong>Everything comes out of an <code>ArrayList&lt;Object&gt;</code> as a reference of type Object, regardless of what the actual object is.</strong> 任何从<code>ArrayList&lt;Object&gt;</code>取出的东西都会被当作Object类型的引用，而不管它原来是什么。</p>

<pre><code class="language-java">// make an ArrayList declared to hold any type of Object
ArrayList&lt;Object&gt; myDogArrayList = new ArrayList&lt;object&gt;()
// make a Dog
Dog aDog = new Dog();
// Add the Dog to the list
myDogArrayList.add(aDog);
// No!! Won&#39;t compile!! the get() method returns type Object.
// The compiler knows only that the object inherits from Object,
// but it doesn&#39;t know it&#39;s a Dog!!
Dog d = myDogArrayList.get(0)
</code></pre>

<p><strong>The compiler decides whether you can call a method based on the <u>reference type</u> , not the actual object type.</strong></p>

<pre><code class="language-java">Object o = al.get(index);
// Class Object has a hashCode() method
// so you can call that method on any object in Java
int i = o.hashCode();
// Can&#39;t do this!! the Object class  has no idea what it means to bark().
o.bark();
</code></pre>

<p><img src="media/15321391987415/method%20based%20on%20the%20reference%20type.png" alt="method based on the reference type"/></p>

<p>If you&#39;re sure the object is really a Dog, you can make a new Dog reference to it by copying the Object reference, and forcing that copy to go into a Dog reference variable, using a <code>cast (Dog)</code>.</p>

<pre><code class="language-java">Object o = al.get(index);
// cast the Object back to a Dog we know is there.
Dog d = (Dog) o;
d.roam();
</code></pre>

<p>If you&#39;re not sure it&#39;s a Dog, you can use the <code>instanceof</code> operator to check.</p>

<pre><code class="language-java">if (o instanceof Dog) {
    Dog d = (Dog) o;
}
</code></pre>

<h3 id="toc_32">8.5 Interface</h3>

<p>Questions: what if you want to add Dog some Pet behaviors?</p>

<ul>
<li><p>Option one: We take the easy path, and put pet method in class Animal.</p>
<ul>
<li>Pros: All the Animals will instantly inherit the pet behaviors. We won&#39;t have to touch the existing Animal subclasses at all.</li>
<li>Cons: Some animals like lion, wolf are not a pet. Non-pet Animals running around with pet methods.</li>
</ul></li>
<li><p>Option two: We start with option one, putting the pet methods in class Animal, but we make the methods abstract.</p>
<ul>
<li>Pros: All classes must override the methods, but they can make the methods &quot;do-nothings&quot;.</li>
<li>Cons: Waste a lot of time to implement every concrete Animal subclasses.</li>
</ul></li>
<li><p>Options three: Put the pet methods Only in the classes where they belong.</p>
<ul>
<li>Pros: The methods are where they belong, and only where they belong.</li>
<li>Cons: Firstly, you&#39;d have to agree to a protocol, and all programmers of pet Animal classes now and in the future would have to know about the protocol. Secondly, you don&#39;t get to use polymorphism for the pet methods </li>
</ul></li>
</ul>

<p>It looks like we need two superclasses at the top.<br/>
<img src="media/15321391987415/it%20looks%20like%20we%20need%20two%20superclasses%20at%20the%20top.png" alt="it looks like we need two superclasses at the top"/></p>

<p>It’s called &quot;<strong>multiple inheritance</strong>&quot;(多重继承) and it can be a Really Bad Thing. Because multiple inheritance has a problem known as <strong>The Deadly Diamond of Death</strong>(致命的死亡砖石)</p>

<p><img src="media/15321391987415/deadly_diamond_of_death.png" alt="deadly_diamond_of_death"/></p>

<p>Java的方案: Interface!!!</p>

<ul>
<li>A Java <strong>interface</strong>(接口) solves multiple inheritance problem by giving you much of the polymorphic benefits of multiple inheritance without the pain and suffering from the Deadly Diamond of Death.</li>
</ul>

<p>How?</p>

<ul>
<li>surprisingly simple: <strong><em>make all the methods abstract</em></strong></li>
<li>A Java interface is like a 100% pure abstract class.</li>
</ul>

<p>To define an interface:</p>

<pre><code class="language-java">//use the keyword &quot;interface&quot; instead of &quot;class&quot;
public interface Pet {}
</code></pre>

<p>To implement an interface:</p>

<pre><code class="language-java">// Use the keyword &quot;implements&quot; followed by the interface name.
public class Dog extends Canine implements Pet {}
</code></pre>

<p>A class can implement <em>multiple</em> interfaces!</p>

<pre><code class="language-java">public class Dog extends Animal implements Pet, Saveable, Paintable {}
</code></pre>

<p>Classes from <em>different</em> inheritance trees can implement the <em>same</em> interface.</p>

<p><img src="media/15321391987415/Classes%20from%20different%20inheritance%20trees%20can%20implement%20the%20same%20interface..png" alt="Classes from different inheritance trees can implement the same interface."/></p>

<p>How do you know whether to make a class, subclass, an abstract class, or an interface?</p>

<ul>
<li>Make a class that doesn’t extend anything (other than Object) when your new class doesn’t pass the IS-A test for any other type.</li>
<li>Make a subclass (in other words, extend a class) only when you need to make a <strong><em>more specific</em></strong> version of a class and need to override or add new behaviors.</li>
<li>Use an abstract class when you want to define a <strong><em>template</em></strong> for a group of subclasses, and you have at least some implementation code that all subclasses could use. Make the class abstract when you want to guarantee that nobody can make objects of that type.</li>
<li>Use an interface when you want to define a <strong><em>role</em></strong> that other classes can play, regardless of where those classes are in the inheritance tree.</li>
</ul>

<h3 id="toc_33">8.6 Using <code>super</code></h3>

<p>What if you don&#39;t want to <em>replace</em> the method with an override in a concrete subclass, but you just want to <em>add</em> to it with some additional specific code?</p>

<pre><code class="language-java">abstract class Report { 
    void runReport() { 
        // set-up report 
    } 
    void printReport() { 
    // generic printing 
    } 
}

class BuzzwordsReport extends Report {
    void runReport() {
        // call superclass version, then come back and do some      
        // subclass-specific stuff
        super.runReport();
        buzzwordCompliance(); 
        printReport();
    }
    void buzzwordCompliance() {...}
}
</code></pre>

<p><img src="media/15321391987415/usage%20of%20Super.png" alt="usage of Supe"/></p>

<h2 id="toc_34">9 Constructors and garbage collection</h2>

<h2 id="toc_35">10 Numbers and statics</h2>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2018/4/21</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='programming_language.html'>编程语言</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="cpp_by_diessection.html">
                
                  <h1>[NOTE] C++ By Dissection</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h2 id="toc_0">Chapter 1 Writing an ANSI C++ Program</h2>

<h2 id="toc_1">Chapter 2 Native Types and Statements</h2>

<h2 id="toc_2">Chapter 3 Functions, Pointers, and Arrays</h2>

<h2 id="toc_3">Chapter 4 Classes and Abstract Data Types</h2>

<h2 id="toc_4">Chapter 5 Ctors, Dtors, Converisons, and Operator Overloading</h2>

<p><strong>Polymorphism</strong> means giving different meanings to the same function name or operator, dependent on context. Overloading of functions gives the same function name different meanings. The name has several interpretations that depend on function selection. This is called ad hoc polymorphism.</p>

<ul>
<li>ad hoc polymorphism: function overloading, operator overloading
<ul>
<li> functions can be applied to arguments of different types</li>
</ul></li>
<li>parametric polymorphism: using templates
<ul>
<li>allows the same code to be used with respect to various types, in which the type is a parameter of the code body.</li>
</ul></li>
<li>pure polymorphism: using virtual functions</li>
</ul>

<p>Chapter 11</p>

<p>OOP Language Characteristics</p>

<ul>
<li>Encapsulation with data hiding: the ability to distinguish an object&#39;s internal state and behavior from its external state and behavior.</li>
<li>Type extensibility: the ability to add user-defined types to augment the native types</li>
<li>Inheritance: the ability to create new types by importing or reusing the description of existing types</li>
<li>Polymorphism with dynamic binding: the ability of objects to be responsible for interpreting function invocation</li>
</ul>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/9/21</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='programming_language.html'>编程语言</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="C_plus_plus_ostream.html">
                
                  <h1>C++ Ostream</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<ul>
<li>设定输出域宽度: <code>setw</code></li>
</ul>

<pre><code class="language-cpp">// 设定域的输出长度为8，而实际字符串长度为4，所有前面补四个空格。
cout &lt;&lt; &quot;[&quot; &lt;&lt; setw(8) &lt;&lt; &quot;AAAA&quot; &lt;&lt; &quot;]&quot;;        // [    AAAA]
</code></pre>

<p>如果<code>setw</code>的数值小于实际数据长度，<code>setw</code>的值无效，比如上述例子：</p>

<pre><code class="language-cpp">//因为3小于实际字符串长度4，最终输出整个字符串。
cout &lt;&lt; &quot;[&quot; &lt;&lt; setw(3) &lt;&lt; &quot;AAAA&quot; &lt;&lt; &quot;]&quot;         // [AAAA]
</code></pre>

<ul>
<li>对齐方式：<code>left</code>/<code>right</code>/<code>internal</code></li>
</ul>

<p>在设定了输出域的宽度<code>setw</code>后，如果设置对齐方式，左对齐还是右对齐(缺省是右对齐(<code>right</code>))</p>

<pre><code class="language-cpp"> cout &lt;&lt; &quot;[&quot; &lt;&lt; setw(8) &lt;&lt; left &lt;&lt; &quot;AAAA&quot; &lt;&lt; &quot;]&quot;;       // [AAAA    ]
 cout &lt;&lt; &quot;[&quot; &lt;&lt; setw(8) &lt;&lt; right &lt;&lt; &quot;AAAA&quot; &lt;&lt; &quot;]&quot;;      // [    AAAA]
 cout &lt;&lt; &quot;[&quot; &lt;&lt; setw(8) &lt;&lt; &quot;AAAA&quot; &lt;&lt; &quot;]&quot;;                    // [    AAAA]
</code></pre>

<ul>
<li>填充字符: <code>setfill</code></li>
</ul>

<p>域宽度不够时，还可以指定，用来代替缺省的空格</p>

<pre><code class="language-cpp">//使用字符&#39;0&#39;作为填充
 cout &lt;&lt; &quot;[&quot; &lt;&lt; setw(8) &lt;&lt; setfill(&#39;0&#39;) &lt;&lt; &quot;AAAA&quot; &lt;&lt; &quot;]&quot;; // [0000AAAA]
 cout &lt;&lt; &quot;[&quot; &lt;&lt; setw(8) &lt;&lt; setfill(&#39;0&#39;) &lt;&lt; left &lt;&lt; &quot;AAAA&quot; &lt;&lt; &quot;]&quot;;    // [AAAA0000]
</code></pre>

<ul>
<li>输出正负号: <code>showpos</code></li>
</ul>

<pre><code class="language-cpp"> cout &lt;&lt; &quot;[&quot; &lt;&lt; showpos &lt;&lt; 123 &lt;&lt; &quot;]&quot;;   // [+123]
 cout &lt;&lt; &quot;[&quot; &lt;&lt; showpos &lt;&lt; -456 &lt;&lt; &quot;]&quot;;  // [-456]
 cout &lt;&lt; &quot;[&quot; &lt;&lt; showpos &lt;&lt; 0 &lt;&lt; &quot;]&quot;;     // [+0]
</code></pre>

<ul>
<li>输出16进制数字值: <code>hex</code></li>
</ul>

<pre><code class="language-cpp">cout &lt;&lt; &quot;[&quot; &lt;&lt; hex &lt;&lt; 20  &lt;&lt; &quot;]&quot;;   //  [14]
</code></pre>

<ul>
<li>可以加前缀<code>0x</code>: <code>showbase</code></li>
</ul>

<pre><code class="language-cpp">cout &lt;&lt; &quot;[&quot; &lt;&lt; showbase &lt;&lt; hex &lt;&lt; setw(2) &lt;&lt; setfill(&#39;0&#39;) &lt;&lt; 5  &lt;&lt; &quot;]&quot;;  // [0x5]
</code></pre>

<ul>
<li>16进制值(A-F)大写: <code>uppercase</code></li>
</ul>

<pre><code class="language-cpp">cout &lt;&lt; &quot;[&quot; &lt;&lt; hex &lt;&lt; uppercase &lt;&lt; setw(2) &lt;&lt; setfill(&#39;0&#39;) &lt;&lt; 10  &lt;&lt; &quot;]&quot;;  // [0A]
</code></pre>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/12/16</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='programming_language.html'>编程语言</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="C++baics.html">
                
                  <h1>C++ Basics</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>The article summarizes the key points, concepts of C++, with detailed examples, from a C Programmer standpoint.</p>

<ul>
<li>
<a href="#toc_0">C++ Advantage</a>
</li>
<li>
<a href="#toc_1">C++ is better than C</a>
</li>
<li>
<a href="#toc_2">Overloading</a>
</li>
<li>
<a href="#toc_3">Generics</a>
<ul>
<li>
<a href="#toc_4">Multiple template arguments</a>
</li>
<li>
<a href="#toc_5">Overloading Operator</a>
</li>
</ul>
</li>
<li>
<a href="#toc_6">Natural way to build widgets: <code>class</code></a>
</li>
<li>
<a href="#toc_7">Constructor and destructor</a>
<ul>
<li>
<a href="#toc_8">Copy Constructor</a>
</li>
<li>
<a href="#toc_9">Destructor</a>
</li>
</ul>
</li>
<li>
<a href="#toc_10">Scope and storage class</a>
</li>
<li>
<a href="#toc_11">Memory Management</a>
</li>
<li>
<a href="#toc_12">Reference</a>
</li>
</ul>


<h2 id="toc_0">C++ Advantage</h2>

<ul>
<li>safe cast
<ul>
<li><code>static cast &lt;type&gt;</code></li>
</ul></li>
<li><code>for</code> statement can include declaration initializer</li>
<li><code>endl</code> io-manipulator can be placed in an iostream.</li>
</ul>

<h2 id="toc_1">C++ is better than C</h2>

<ul>
<li>More <code>type safety</code>(the extent to which a programming language discourages or prevents type errors)
<ul>
<li>The new operator returns a pointer of a specific type based on the operand, versus the void pointer from C&#39;s <code>malloc</code>.</li>
<li>Certain code written in C that uses void pointers can be rewritten using C++ templates to give a type to an argument whose type is variable.</li>
<li>Using <code>static_cast</code> and <code>dynamic_cast</code></li>
</ul></li>
<li>More Libraries
<ul>
<li>STL(Standard Template Library)</li>
</ul></li>
<li>Less reliance on preprocessor
<ul>
<li><code># define</code>  goes away, easy to use <code>const &lt;type&gt;</code> and <code>inline</code> (substitute macros in C)instead.</li>
</ul></li>
<li>OO vs imperative
<ul>
<li>OO is better</li>
</ul></li>
<li><code>namespace</code></li>
<li>safe cast 
<ul>
<li>using <code>static_cast &lt;type&gt;</code></li>
</ul></li>
<li><code>iostream</code></li>
<li>Declarations anywhere including
<ul>
<li>for-statement initialization</li>
</ul></li>
</ul>

<h2 id="toc_2">Overloading</h2>

<p><code>Overloaded functions</code> are an important polymorphic mechanism in C++. <code>signature matching algorithm</code> decides the way to pick the appropriate functions.</p>

<p><strong><code>Basic Signature Matching Algorithm</code></strong>:</p>

<ul>
<li>Use an exact match if found.</li>
<li>Try standard type promotions.</li>
<li>Try standard type conversions.</li>
<li>Try user-defined conversions.</li>
<li>...</li>
</ul>

<p><strong>Example: Swap in C</strong> </p>

<pre><code class="language-c"> //first swap function
 //Call by reference simulated with pointers
 void swap(int* i, int* j){
    int temp=*i;
    *i=*j;
    *j=temp;
 }

//second swap function
//Call by reference simulated with pointers
void swap_double(double* i, double* j){ 
    double temp=*i;
    *i=*j;
    *j=temp;
 }
 
 int main()
 {
    int m=5, n=10;
    double x=5.3, y=10.6;
    printf(&quot;inputs:%d, %d\n&quot;, m,n);
    swap_double(&amp;m, &amp;n);
    printf(&quot;outputs:%d, %d\n&quot;, m,n);
    printf(&quot;double inputs:%lf, %lf\n&quot;, x,y);
    swap_double(&amp;x, &amp;y);
    printf(&quot;double outputs: %lf, %lf\n&quot;, x, y);
}
</code></pre>

<p>In C each function in a given scope most have a unique name(no function overloading).</p>

<ul>
<li>C: Call by reference simulated with pointers (the previous example)</li>
<li>C++: Call by reference argument passing (see the example below)</li>
</ul>

<p><strong>Example: Swap in C++</strong>:</p>

<pre><code class="language-cpp">#include &lt;iostream&gt;
using namespace std;

// iostream type safe and intuitive convinient.

inline void swap(int &amp;i, int &amp;j){ // call by reference, reference to int
        int temp = i;
        i = j;
        j = temp;
}

inline void swap(double &amp;i, double &amp;j){
        double temp = i;
        i = j;
        j = temp;
}

int main()
{
        int m=5, n=10;
        double x = 5.3, y=10.6;
        cout &lt;&lt; &quot;inputs: &quot; &lt;&lt; m &lt;&lt; &quot;,&quot; &lt;&lt; n &lt;&lt; endl;
        swap(m,n);
        cout &lt;&lt; &quot;outputs: &quot; &lt;&lt; m &lt;&lt; &quot;,&quot; &lt;&lt; n &lt;&lt; endl;

        cout &lt;&lt; &quot;double inputs: &quot; &lt;&lt; x &lt;&lt; &quot;,&quot; &lt;&lt; y &lt;&lt; endl;
        swap(x,y);
        cout &lt;&lt; &quot;outputs: &quot; &lt;&lt; x &lt;&lt; &quot;,&quot; &lt;&lt; y &lt;&lt; endl;
}
</code></pre>

<ul>
<li>Having the same name for conceptually the same activity promotes readable code.</li>
<li>Overloading based on signature and the use of generics(<code>template</code>) is a powerful reuse mechanism.</li>
</ul>

<h2 id="toc_3">Generics</h2>

<p>Generics in C++: programing using templates.</p>

<ul>
<li>The compiler uses <code>template</code> to write code appropriate to each set of parameters.</li>
<li>The \(m\), \(n\) parameters are ints - so the compiled code is <code>swap(int&amp;, int&amp;)</code> signature.</li>
<li>Similarly, for the other two signatures. So the compiler is compiling code appropriate to each distinct signature.</li>
</ul>

<p><strong>Example: Swap Using templates</strong>:</p>

<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;complex&gt;

using namespace std;

template &lt;class T&gt;
inline void swaps(T&amp; d, T&amp; s)
{
        T temp=d;
        d = s;
        s = temp;
}

int main()
{
        int m=5, n=10;
        double x=5.3, y=10.6;
        complex&lt;double&gt; r(2.4, 3.5), s(3.4, 6.7);
        cout &lt;&lt; &quot;inputs: &quot; &lt;&lt; m &lt;&lt; &quot;,&quot; &lt;&lt; n &lt;&lt; endl;
        swaps(m,n);
        cout &lt;&lt; &quot;outputs:&quot; &lt;&lt; m &lt;&lt; &quot;,&quot; &lt;&lt; n &lt;&lt; endl;

        cout &lt;&lt; &quot;complex double inputs: &quot; &lt;&lt; r &lt;&lt; &quot;,&quot; &lt;&lt; s &lt;&lt; endl;
        swaps(r,s);
        cout &lt;&lt; &quot;complex double outputs:&quot; &lt;&lt; r &lt;&lt; &quot;,&quot; &lt;&lt; s &lt;&lt; endl;
}
</code></pre>

<p>Another example, how in C do you write a function to sum a array in doubles?</p>

<p><strong>Example: Sum a array in C</strong>:</p>

<pre><code class="language-c">double sum(double data[], int size)
{
    double s =0.0;
    int i;
    for (i=0; i&lt;size; i++)
        s += data[i];
    return s;        
</code></pre>

<p>Generic programming:</p>

<ul>
<li>writing code that can use an arbitrary type or types; in C++ this is done with template.</li>
</ul>

<p><strong>Example: Sum a array in C++ Using template</strong>:</p>

<pre><code class="language-cpp">template &lt;class T&gt; //T is generic type
T sum(const T data[], int size, T s=0)
{
    for (int i=0; i&lt;size; ++i)
        s += data[i]; // += must work for T
    return s;
}

int main()
{
    cout &lt;&lt; &quot;template for sum()&quot; &lt;&lt; endl;
    int a[] = {1,2,3};
    double b[] = {2.1, 2.2, 2.3};
    cout &lt;&lt; sum(a,3) &lt;&lt; endl;
    cout &lt;&lt; sum(b,3) &lt;&lt; endl;
}
</code></pre>

<h3 id="toc_4">Multiple template arguments</h3>

<ul>
<li>We have used templates with one template parameter, but it is useful to have more that one distinct type in a template.</li>
<li>More genericity - but be careful!</li>
</ul>

<p><strong>Type safety</strong>:</p>

<ul>
<li>More types means worrying about conversions and more signatures</li>
<li>There <code>static_cast</code> operators are considered safe.</li>
<li>The old cast operator (type) is deprecated as a reminder the other casting operators are:
<ul>
<li><code>reinterpret_cast&lt;type&gt;</code> highly unsafe</li>
<li><code>dynamic_cast&lt;type&gt;</code> used with classes</li>
<li><code>const_cast&lt;type&gt;</code> cast away const-ness</li>
</ul></li>
</ul>

<h3 id="toc_5">Overloading Operator</h3>

<p>Unary and binary operators can be overloaded as nonstatic member functions. Implicitly, they are acting on a class value.</p>

<pre><code class="language-cpp">#include&lt;iostream&gt; 
#include&lt;cstdint&gt; 

using namespace std;

enum class days:std::int8_t 
{SUN,MON,TUE,WED,THU,FRI,SAT};

//unlike plain enums C++11 enum class is typesafe and does not silently 
//convert to int

ostream&amp; operator&lt;&lt;(ostream&amp; out, const days&amp; d)  // call by reference 
{
    switch (d){
        case days::SUN: out&lt;&lt; &quot;SUN&quot;; break;
        case days::MON: out&lt;&lt; &quot;MON&quot;; break;
        case days::TUE: out&lt;&lt; &quot;TUE&quot;; break;
        case days::WED: out&lt;&lt; &quot;WED&quot;; break;
        case days::THU: out&lt;&lt; &quot;THU&quot;; break;
        case days::FRI: out&lt;&lt; &quot;FRI&quot;; break;
        case days::SAT: out&lt;&lt; &quot;SAT&quot;; break;
    }
    return out;
}

days operator++(days&amp; d) //PREFIX OPERATOR 
{ 
    d = static_cast&lt;days&gt;((static_cast&lt;int&gt;(d) + 1) % 7); 
    return d;
}

days operator++(days&amp; d, int) //POSTFIX OPERATOR 
{
    days temp = d;
    d = static_cast&lt;days&gt;((static_cast&lt;int&gt;(d) + 1) % 7);
    return temp; 
}

int main(){
    days today{days::MON};
    std::cout &lt;&lt; &quot;Demonstrate class enum&quot; &lt;&lt; std::endl; 
    std::cout &lt;&lt; &quot;MONDAY VALUE IS &quot; &lt;&lt; today &lt;&lt; std::endl;
    std::cout &lt;&lt; &quot;INCREMENT VALUE IS &quot; &lt;&lt; ++today &lt;&lt; std::endl; 
    std::cout &lt;&lt; &quot;INCREMENT VALUE IS &quot; &lt;&lt; today++ &lt;&lt; std::endl; 
    std::cout &lt;&lt; &quot;INCREMENT VALUE IS &quot; &lt;&lt; today &lt;&lt; std::endl; 
    return 0;
}

</code></pre>

<p>OO Principle:</p>

<ul>
<li>User defined types should be indistinguishable from native types
<ul>
<li>Operator overloading and conversion allows us to implement this principle</li>
</ul></li>
</ul>

<h2 id="toc_6">Natural way to build widgets: <code>class</code></h2>

<p><strong>C type extension</strong>:</p>

<ul>
<li>In C you can &#39;add&#39; a type using <code>struct</code></li>
<li>In C++ <code>struct</code> is different - <code>struct</code> is a named scope that can include functions (methods) and have different layers of opacity (data hiding). While C++ retains <code>struct</code> it has the new keyword <code>class</code>.</li>
<li><code>class</code> is almost equivalent to <code>struct</code> - but with different data hiding defaults.</li>
</ul>

<pre><code class="language-cpp">typedef struct point {double x,y;} point;
void add_points(point* p1, point* p2, point* sum)
{
    sum -&gt; x = p1 -&gt; x + p2 -&gt; x;
    sum -&gt; y = p1 -&gt; y + p2 -&gt; y;
}
</code></pre>

<ul>
<li>C struct has fields - data members;</li>
<li>File scope functions manipulate the struct using pointer operations</li>
</ul>

<p><strong>Naive C++ point</strong></p>

<pre><code class="language-cpp">class point{
    public:
        double x,y;
};
</code></pre>

<ul>
<li><code>public</code>, <code>private</code>, <code>protected</code> are access keywords.</li>
</ul>

<p><strong>Better C++ Point</strong>:</p>

<pre><code class="language-cpp">#include &lt;iostream&gt;
using namespace std;

class point{
    public:
        double getx(){return x;} // access methods
        void setx(double v){x = v;} // mutate methods 
        double x,y; 
};

point operator+(point&amp; p1, point&amp; p2){
    point sum={p1.x + p2.x, p1.y+p2.y};
    return sum;
}

ostream&amp; operator&lt;&lt;(ostream&amp; out, const point&amp;p){
    out &lt;&lt; &quot;(&quot; &lt;&lt; p.x &lt;&lt; &quot;,&quot; &lt;&lt; p.y &lt;&lt;&quot;)&quot;;
    return out;
}

int main()
{
    point a = {3.5, 2.5}, b={2.5, 4.5}, c;
    cout &lt;&lt; &quot;a=&quot; &lt;&lt; a &lt;&lt; &quot; b= &quot; &lt;&lt; b &lt;&lt; endl;
    cout &lt;&lt; &quot;sum= &quot; &lt;&lt; a+b &lt;&lt; endl;
}

// reuslt is 
//a=(3.5,2.5) b= (2.5,4.5)
//sum= (6,7)
</code></pre>

<p><strong>class - User defined types</strong>:</p>

<ul>
<li>Using point in <code>main()</code> looks very much like using a native type.</li>
<li>Indeed this is one of our key goal in Object Oriented Programming.</li>
<li>We accomplished this by having point be a class -- a user defined type. We overload the standard operators like + and &lt;&lt; to give them appropriate &quot;point&quot; semantics.</li>
</ul>

<p><strong>Methods</strong>:</p>

<ul>
<li>Class member functions have automatic access to private members.</li>
<li><code>p1.getx()</code>, <code>p1.setx(3.5)</code></li>
</ul>

<h2 id="toc_7">Constructor and destructor</h2>

<p>A <code>constructor</code>(构造函数) is a member function whose name is the same as the class name; it creates objects of the class type. This process involves initializing data members and, frequently, allocating storage from the heap by using <code>new</code>.</p>

<p><code>default constructor</code> does not requires a initializing value(no arguments),</p>

<pre><code class="language-cpp">class point{
    public:
        //constructor, initializer list
        point(double x=0.0, double y=0.0): x(x), y(y){} 
        double getx(){return x;}
        void setx(double v){x=v;}
    private:
        double x,y;
};
</code></pre>

<p><strong>A special method constructor</strong>:</p>

<ul>
<li><code>point(){x=y=0.0;}</code>: ordinary assignment</li>
<li><code>point(){this-&gt;x=0.0; this-&gt;y=0.0}</code> :initialized list</li>
<li><code>point():x(0.0), y(0.0){}</code> : best way</li>
<li>Default constructor - the constructor whose signature is void.</li>
</ul>

<p><strong>Constructor overloading</strong>:</p>

<ul>
<li>It is useful to have multiple ways to initialize an object like point.</li>
<li><code>point(double x, double y)</code></li>
<li><code>{this -&gt; x=x; this-&gt;y=y};</code></li>
</ul>

<p>It is also the case that usually there are several constructors per class. Each constructor signature represents a useful way to declare and initialize an object of that type.</p>

<p><strong>Example: Improved Points Using constructor</strong></p>

<pre><code class="language-cpp">#include &lt;iostream&gt;

using namespace std;

class point{
    public:
        point(): x(0), y(0) {} //default
        point(double u): x(u), y(0) {} //double to point
        point(double u, double v): x(u), y(v) {}
        void print() const { cout &lt;&lt; &quot;(&quot; &lt;&lt; x &lt;&lt; &quot;,&quot; &lt;&lt; y &lt;&lt; &quot;)&quot;; }
        void set(double u, double v) {x =u; y=v;}
        void plus(point c) {x += c.x; y+=c.y;}
    private:
        double x, y;
};


double parabola(double x, double p)
{
    return (x*x)/p;
}

void graph(double a, double b, double incr, 
    double f(double, double), double p, point gr[])
{
    double x = a;
    for (int i=0; x &lt;=b; ++i, x += incr)
        gr[i].set(x, f(x, p));
}


const int no_of_pts = 20;


int main()
{
    point g[no_of_pts]; // use default ctor

    graph(0, 2, 0.1, parabola, 5, g);
    cout &lt;&lt; &quot;First 20 samples:&quot; &lt;&lt; endl;
    for (int i=0; i&lt; no_of_pts; ++i)
    {
        g[i].print();
        if (i%5==4)
            cout &lt;&lt; endl;
        else
            cout &lt;&lt; &quot;  &quot;;
    }
}
</code></pre>

<h3 id="toc_8">Copy Constructor</h3>

<p>For class types, call-by-value requires a <code>copy constructor</code>. The compiler provides a copy constructor whose signature is <code>class_name:: class_name(const class_name &amp;)</code></p>

<h3 id="toc_9">Destructor</h3>

<p>A <code>destructor</code>(析构函数) is a member function whose name is the class preceded by the tilde character, <code>~</code>. The destructor is implicitly invoked on block and function exit to clean up storage no longer accessible.</p>

<p><strong>Example:List</strong>:</p>

<pre><code class="language-cpp">#include &lt;iostream&gt;

using namespace std;

struct list_element {
    list_element(int n=0, list_element* ptr=0): d(n), next(ptr){}
    int d;
    list_element* next;
};


class list{
    public:
        list(): head(0), cursor(0){}  // default constructor
        list(const int* arr, int n); // transfer data
        list(const list&amp; lst); //copy constructor
        void prepend(int n); //insert at front value n
        int get_element(){ return cursor -&gt; d;}
        void advance(){ cursor = cursor -&gt; next;}
        void print();
        ~list(){delete head; delete cursor;}; // destructor
    private:
        list_element* head;
        list_element* cursor;
};


void list::prepend(int n)
{
    if (head==0) // empty list case
        cursor = head = new list_element(n, head);
    else // add to front-chain
        head = new list_element(n, head);
}


void list::print(){
    list_element* h = head;
    while(h!=0){//idiom for chaining
        cout &lt;&lt; h-&gt;d &lt;&lt; &quot;,&quot;;
        h = h-&gt;next;
    }
    cout &lt;&lt; &quot;###&quot; &lt;&lt; endl;
}

int main()
{
    list a, b;
    a.prepend(9);
    a.prepend(8);
    cout &lt;&lt; &quot; list a&quot; &lt;&lt; endl;
    a.print();
    for (int i=0; i&lt;40; ++i)
        b.prepend(i*i);
    cout &lt;&lt; &quot; list b&quot; &lt;&lt; endl;
    b.print();
    return 0;
}
</code></pre>

<h2 id="toc_10">Scope and storage class</h2>

<p>The C++ has two principle forms of scope: <code>local scope</code> and <code>file scope</code>. <code>Local scope</code> is scoped to a block(e.g. compound statements, function bodies). <code>File scope</code> has names that are external(global).  </p>

<p>The four storage classes are <code>auto</code>, <code>extern</code>, <code>register</code>, and <code>static</code>.</p>

<p><strong><code>auto</code></strong>:</p>

<ul>
<li>allocated within a block, and its lifetime is limited to the execution of that block.</li>
</ul>

<p><strong><code>register</code></strong>:</p>

<ul>
<li>tells the compiler that the associated variables should be stored in high-speed memory registers</li>
</ul>

<p><strong><code>static</code></strong>:</p>

<ul>
<li><code>static</code> variables retain its previous value when the block is reentered.</li>
<li><code>static</code> functions are visible only within the file in which they are defined.</li>
</ul>

<h2 id="toc_11">Memory Management</h2>

<p>In C++:</p>

<ul>
<li><code>new</code> (allocator) instead of <code>malloc()</code> in C </li>
<li><code>delete</code> (deallocator) instead of <code>free()</code> in C</li>
<li>Both work with a heap -- heap is dynamically allocated memory - unlike Java not automatically garbage collected.</li>
</ul>

<p><strong>Simple use of <code>new</code> and <code>delete</code></strong>:</p>

<pre><code class="language-cpp">char* s = new char[size]; //get of heap
int* p = new int(9); //single int initialized
delete [] s; //delete an array
delete p; //delete single element

// These will get used with dynamic data structures 
// in constructors and destructors
</code></pre>

<h2 id="toc_12">Reference</h2>

<ul>
<li>Ira Pohl. C++ for C Programmers,University of California, Santa Cruz</li>
<li>Ira Pohl. <a href="https://users.soe.ucsc.edu/%7Epohl/">C++ by Dissection</a>.</li>
</ul>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2016/10/28</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='programming_language.html'>编程语言</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="C++STL.html">
                
                  <h1>C++ STL</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>Containers come in two major families: <code>sequence</code> and <code>associative</code>. Sequence containers (<code>vector</code>, <code>list</code>, and <code>deque</code>) are ordered by having a sequence of elements. Associative containers (<code>set</code>, <code>multiset</code>, <code>map</code> and <code>multimaps</code>) have keys for looking up elements.</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2016/10/29</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='programming_language.html'>编程语言</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
              


			<div class="row">
			  <div class="large-6 columns">
			  <p class="text-left" style="padding-top:25px;">
			   
			  </p>
			  </div>
			  <div class="large-6 columns">
			<p class="text-right" style="padding-top:25px;">
			 <a href="programming_language_1.html">&raquo; Next Page</a> 
			</p>
			  </div>
			</div>
		</div>
	</div><!-- large 8 -->

 <div class="large-4 medium-4 columns">
  <div class="hide-for-small">
    <div id="sidebar" class="sidebar">
          <div id="site-info" class="site-info">
            
                <div class="site-a-logo"><img src="http://or9a8nskt.bkt.clouddn.com/figure.jpeg" /></div>
            
                <h1>techlarry</h1>
                <div class="site-des">他山之石，可以攻玉</div>
                <div class="social">









<a target="_blank" class="github" target="_blank" href="https://github.com/techlarry" title="GitHub">GitHub</a>
<a target="_blank" class="email" href="mailto:wang.zhen.hua.larry@gmail.com" title="Email">Email</a>
  <a target="_blank" class="rss" href="atom.xml" title="RSS">RSS</a>
                
              	 </div>
          	</div>

             

              <div id="site-categories" class="side-item ">
                <div class="side-header">
                  <h2>Categories</h2>
                </div>
                <div class="side-content">

      	<p class="cat-list">
        
            <a href="Leetcode.html"><strong>Leetcode</strong></a>
        
            <a href="programming_language.html"><strong>编程语言</strong></a>
        
            <a href="data_structure_and_algorithm.html"><strong>数据结构和算法</strong></a>
        
            <a href="Python%E7%89%B9%E6%80%A7.html"><strong>Python特性</strong></a>
        
            <a href="%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0.html"><strong>机器学习</strong></a>
        
            <a href="Python%E7%A7%91%E5%AD%A6%E8%AE%A1%E7%AE%97%E4%B8%89%E7%BB%B4%E5%8F%AF%E8%A7%86%E5%8C%96.html"><strong>Python科学计算三维可视化</strong></a>
        
            <a href="English.html"><strong>English</strong></a>
        
            <a href="Computer%20System.html"><strong>Computer System</strong></a>
        
            <a href="Deep%20Learning.html"><strong>Deep Learning</strong></a>
        
            <a href="Linux%20%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B.html"><strong>Linux 系统编程</strong></a>
        
            <a href="%E6%95%B0%E6%8D%AE%E5%BA%93.html"><strong>数据库</strong></a>
        
            <a href="Tensorflow.html"><strong>Tensorflow</strong></a>
        
            <a href="Big%20Data.html"><strong>Big Data</strong></a>
        
            <a href="%E6%96%87%E7%8C%AE%E9%98%85%E8%AF%BB.html"><strong>文献阅读</strong></a>
        
            <a href="Tools.html"><strong>Tools</strong></a>
         
        </p>


                </div>
              </div>

              <div id="site-categories" class="side-item">
                <div class="side-header">
                  <h2>Recent Posts</h2>
                </div>
                <div class="side-content">
                <ul class="posts-list">
	      
		      
			      <li class="post">
			        <a href="head-first_java_note.html">Head first Java</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="exceptional_control_flow.html">CSAPP - 异常控制流</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="introduction_to_computer_system_CMU.html">CMU 15-213 Introduction to Computer Systems</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="os-concepts-os-structures.html">Operating System Concepts 2 - Operating System structures</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="os-concets-processes.html">Operating System Concepts 3 - Processes</a>
			      </li>
		     
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		   
		  		</ul>
                </div>
              </div>
        </div><!-- sidebar -->
      </div><!-- hide for small -->
</div><!-- large 4 -->

</div><!-- row -->

 <div class="page-bottom clearfix">
  <div class="row">
   <p class="copyright">Copyright &copy; 2015
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
Theme used <a target="_blank" href="http://github.com">GitHub CSS</a>.</p>
  </div>
</div>

        </section>
      </div>
    </div>

  
    

    <script src="asset/js/foundation.min.js"></script>
    <script>
      $(document).foundation();
      function fixSidebarHeight(){
        var w1 = $('.markdown-body').height();
          var w2 = $('#sidebar').height();
          if (w1 > w2) { $('#sidebar').height(w1); };
      }
      $(function(){
        fixSidebarHeight();
      })
      $(window).load(function(){
          fixSidebarHeight();
      });
     
    </script>

    
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({TeX: { equationNumbers: { autoNumber: "AMS" } }});</script>


  </body>
</html>
